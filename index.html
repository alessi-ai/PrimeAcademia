<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeAcademia - Plateforme d'Épreuves Académiques</title>
    <meta name="description" content="PrimeAcademia - Plateforme éducative offrant gratuitement des épreuves académiques organisées par filière et année. Outils de préparation et conseils pour la réussite étudiante.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* ===== VARIABLES DE COULEURS PROFESSIONNELLES ===== */
        :root {
            --primary: #4A6FA5;
            --secondary: #6B8E23;
            --accent: #D4A017;
            --accent2: #8B4513;
            --accent3: #5D7B93;
            --accent4: #8A2BE2;
            --light: #F5F7FA;
            --light2: #E8EEF4;
            --dark: #2C3E50;
            --dark2: #34495E;
            --success: #27AE60;
            --warning: #F39C12;
            --error: #E74C3C;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --radius: 12px;
            --radius-lg: 20px;
            --radius-sm: 8px;
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--dark);
            background-color: var(--light);
            transition: var(--transition);
            overflow-x: hidden;
            min-height: 100vh;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== HEADER & MENU BURGER ===== */
        header {
            background: var(--light);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid var(--primary);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
            z-index: 1001;
        }

        .logo:hover {
            color: var(--accent2);
            transform: translateX(5px);
        }

        .logo i {
            font-size: 1.8rem;
            color: var(--accent);
            animation: float 3s ease-in-out infinite;
        }

        /* Menu burger */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }

        .menu-toggle span {
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
            transition: var(--transition);
            display: block;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Navigation principale */
        nav {
            transition: var(--transition);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            padding: 0.7rem 1.3rem;
            border-radius: 50px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            font-size: 1rem;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 111, 165, 0.1), transparent);
            transition: var(--transition);
        }

        nav a:hover::before {
            left: 100%;
        }

        nav a:hover, nav a.active {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(74, 111, 165, 0.3);
        }

        /* Style pour le lien de connexion lorsqu'utilisateur est connecté */
        .user-logged-in {
            background: linear-gradient(135deg, var(--success), #2ECC71) !important;
            color: white !important;
            padding: 0.7rem 1.5rem !important;
        }

        .user-logged-in:hover {
            background: linear-gradient(135deg, #2ECC71, var(--success)) !important;
        }

        /* ===== MODAL D'AUTHENTIFICATION ===== */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            overflow-y: auto;
            padding: 20px;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-modal-content {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: fadeInDown 0.5s ease-out;
            position: relative;
            border: 3px solid var(--primary);
            margin: auto;
            max-height: 90vh;
            overflow-y: auto;
        }

        .auth-modal-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            padding-right: 2rem;
        }

        .auth-modal-header i {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .auth-modal-header h2 {
            color: var(--dark);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .auth-modal-header p {
            color: var(--dark2);
            font-size: 1rem;
            line-height: 1.6;
            max-width: 400px;
            margin: 0 auto;
        }

        /* ===== MAIN CONTENT ===== */
        main {
            min-height: calc(100vh - 200px);
            padding: 2rem 0;
        }

        .page-section {
            display: none;
            animation: fadeIn 0.6s ease-out;
            width: 100%;
            overflow-x: hidden;
        }

        .page-section.active {
            display: block;
        }

        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1.5rem;
            width: 100%;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .page-title i {
            font-size: 3rem;
            margin-bottom: 1.2rem;
            color: var(--primary);
            display: inline-block;
            animation: float 4s ease-in-out infinite;
        }

        .page-title h1 {
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-weight: 700;
            line-height: 1.3;
            padding: 0 10px;
        }

        /* ===== INTRODUCTION ===== */
        .intro-collapsed, .intro-expanded {
            background: var(--light2);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border-left: 5px solid var(--accent);
            width: 100%;
        }

        .intro-collapsed:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-left-color: var(--accent4);
        }

        .intro-collapsed-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
        }

        .intro-collapsed-header h2 {
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--dark);
            font-size: 1.2rem;
            flex: 1;
        }

        .intro-collapsed-header h2 i {
            color: var(--accent);
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .intro-toggle {
            background: var(--primary);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            color: white;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .intro-toggle:hover {
            background: var(--accent2);
            transform: rotate(180deg);
        }

        .intro-expanded h2 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(74, 111, 165, 0.1);
            font-size: 1.3rem;
        }

        .intro-expanded h2 i {
            color: var(--accent);
        }

        .intro-expanded h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem;
            padding-left: 1rem;
            border-left: 4px solid var(--secondary);
            font-size: 1.2rem;
        }

        .intro-expanded ul {
            margin: 1rem 0 1.5rem 1.5rem;
        }

        .intro-expanded li {
            margin-bottom: 0.8rem;
            position: relative;
            font-size: 1rem;
            line-height: 1.6;
        }

        .intro-expanded li::before {
            content: '✓';
            position: absolute;
            left: -1.5rem;
            color: var(--success);
            font-weight: bold;
        }

        /* ===== CONTROLS ===== */
        .controls {
            background: var(--light2);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(74, 111, 165, 0.1);
            width: 100%;
        }

        .search-box {
            position: relative;
            margin-bottom: 1.5rem;
            width: 100%;
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent3);
            z-index: 1;
        }

        .search-box input {
            width: 100%;
            padding: 14px 20px 14px 50px;
            border: 2px solid var(--light2);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
            color: var(--dark);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .search-box input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            width: 100%;
        }

        select {
            flex: 1;
            min-width: 180px;
            padding: 14px 20px;
            border: 2px solid var(--light2);
            border-radius: var(--radius);
            background: white;
            color: var(--dark);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%234A6FA5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }

        select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        /* ===== STATS ===== */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
            width: 100%;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border-top: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
        }

        .stat-card:nth-child(1) { border-top-color: var(--primary); }
        .stat-card:nth-child(2) { border-top-color: var(--secondary); }
        .stat-card:nth-child(3) { border-top-color: var(--accent); }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .stat-card:nth-child(1) i { color: var(--primary); }
        .stat-card:nth-child(2) i { color: var(--secondary); }
        .stat-card:nth-child(3) i { color: var(--accent); }

        .stat-card h3 {
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .stat-card p {
            color: var(--dark2);
            font-size: 1rem;
        }

        /* ===== FILES CONTAINER ===== */
        .files-container {
            background: var(--light2);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(74, 111, 165, 0.1);
            width: 100%;
            overflow-x: auto;
        }

        .loading, .error, .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            width: 100%;
        }

        .loading i, .error i, .empty-state i {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            display: inline-block;
        }

        .loading i {
            color: var(--primary);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .error i {
            color: var(--error);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .empty-state i {
            color: var(--accent3);
            animation: float 3s ease-in-out infinite;
        }

        .loading h2, .error h2, .empty-state h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        /* ===== FILES GRID ===== */
        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
            width: 100%;
        }

        .file-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid rgba(74, 111, 165, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .file-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .file-card.new-file::before {
            content: 'Nouveau';
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, var(--success), #2ECC71);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            z-index: 2;
            animation: pulse 2s infinite;
            box-shadow: 0 3px 10px rgba(39, 174, 96, 0.3);
        }

        .file-header {
            background: linear-gradient(135deg, var(--primary), var(--accent3));
            padding: 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .file-header i {
            font-size: 2.5rem;
            color: white;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
            animation: float 3s ease-in-out infinite;
        }

        .file-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .file-content h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.1rem;
            line-height: 1.4;
            flex: 1;
        }

        .file-meta {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-bottom: 1.2rem;
        }

        .file-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--dark2);
            font-size: 0.9rem;
        }

        .file-meta i {
            color: var(--accent);
            width: 16px;
        }

        .file-type {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(74, 111, 165, 0.1);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--primary);
            margin-top: 0.5rem;
        }

        .file-date {
            font-size: 0.85rem;
            color: var(--dark2);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .file-actions {
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(74, 111, 165, 0.1);
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        /* ===== PAGINATION ===== */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 2rem;
            padding: 1rem;
            flex-wrap: wrap;
        }

        .pagination-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            background: white;
            border: 2px solid var(--light2);
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .pagination-btn:hover:not(.disabled) {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .pagination-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(74, 111, 165, 0.3);
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            color: var(--dark2);
            font-size: 0.9rem;
            margin: 0 10px;
        }

        /* ===== ARTICLES ===== */
        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            width: 100%;
        }

        .article-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid rgba(74, 111, 165, 0.1);
            position: relative;
        }

        .article-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .article-image {
            background: linear-gradient(135deg, var(--primary), var(--accent3));
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .article-image i {
            font-size: 2.5rem;
            color: white;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
            animation: float 3s ease-in-out infinite;
        }

        .article-content {
            padding: 1.5rem;
        }

        .article-content h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.2rem;
            line-height: 1.4;
        }

        .article-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .article-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(74, 111, 165, 0.1);
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            color: var(--primary);
            font-weight: 500;
        }

        .article-content p {
            margin-bottom: 1.5rem;
            color: var(--dark2);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .read-more {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            transition: var(--transition);
            padding: 8px 16px;
            border-radius: 50px;
            background: rgba(74, 111, 165, 0.1);
        }

        .read-more:hover {
            background: var(--primary);
            color: white;
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(74, 111, 165, 0.3);
        }

        /* ===== ARTICLE DETAIL ===== */
        .back-to-articles {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            margin-bottom: 1.5rem;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(74, 111, 165, 0.1);
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .back-to-articles:hover {
            background: var(--primary);
            color: white;
            transform: translateX(-5px);
        }

        .article-detail {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(74, 111, 165, 0.1);
            width: 100%;
        }

        .article-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid rgba(74, 111, 165, 0.1);
        }

        .article-header h1 {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .article-meta-large {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            color: var(--dark2);
            flex-wrap: wrap;
        }

        .article-meta-large span {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .article-body h2 {
            color: var(--primary);
            margin: 2rem 0 1.2rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid rgba(74, 111, 165, 0.1);
            font-size: 1.5rem;
        }

        .article-body h3 {
            color: var(--secondary);
            margin: 1.5rem 0 0.8rem;
            font-size: 1.2rem;
        }

        .article-body p {
            margin-bottom: 1.2rem;
            line-height: 1.7;
            color: var(--dark2);
            font-size: 1rem;
        }

        .article-body ul {
            margin: 1.2rem 0;
            padding-left: 1.5rem;
        }

        .article-body li {
            margin-bottom: 0.8rem;
            position: relative;
            padding-left: 1.2rem;
            line-height: 1.6;
            font-size: 1rem;
        }

        .article-body li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-size: 1.2rem;
        }

        .article-body blockquote {
            background: linear-gradient(135deg, var(--light), var(--light2));
            border-left: 5px solid var(--accent);
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            border-radius: 0 var(--radius) var(--radius) 0;
            color: var(--dark);
            font-size: 1rem;
            line-height: 1.6;
        }

        .article-body .highlight-box {
            background: linear-gradient(135deg, var(--primary), var(--accent3));
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            margin: 2rem 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(74, 111, 165, 0.3);
        }

        .article-body .highlight-box h3 {
            color: white;
            margin: 0 0 1rem 0;
            font-size: 1.2rem;
        }

        /* ===== AUTHENTIFICATION ===== */
        .auth-content {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(74, 111, 165, 0.1);
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }

        .toggle-buttons {
            display: flex;
            margin-bottom: 2rem;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            background: var(--light2);
        }

        .toggle-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            background: transparent;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .toggle-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(74, 111, 165, 0.3);
        }

        .toggle-btn:hover:not(.active) {
            background: rgba(74, 111, 165, 0.1);
        }

        .auth-step {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .auth-step.active {
            display: block;
        }

        .auth-step-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-step-header h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .auth-step-header p {
            color: var(--dark2);
            font-size: 0.95rem;
        }

        .auth-step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .auth-step-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--light2);
            transition: var(--transition);
        }

        .auth-step-dot.active {
            background: var(--primary);
            transform: scale(1.2);
        }

        .auth-form {
            width: 100%;
        }

        .auth-form-group {
            margin-bottom: 1.5rem;
        }

        .auth-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .auth-form-group input, .auth-form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--light2);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
            color: var(--dark);
            font-family: inherit;
        }

        .auth-form-group input:focus, .auth-form-group select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        .auth-form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .auth-form-actions .btn {
            flex: 1;
            min-width: 120px;
        }

        .auth-form-footer {
            text-align: center;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--light2);
            color: var(--dark2);
            font-size: 0.9rem;
        }

        .auth-form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .auth-form-footer a:hover {
            color: var(--accent2);
            text-decoration: underline;
        }

        .password-input-container {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--accent3);
            cursor: pointer;
            padding: 4px;
            font-size: 1rem;
        }

        /* ===== ABOUT PAGE ===== */
        .about-content, .contact-content, .privacy-content, .legal-content {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(74, 111, 165, 0.1);
            width: 100%;
        }

        .about-section {
            margin-bottom: 2.5rem;
        }

        .about-section h2 {
            color: var(--primary);
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
        }

        .about-section h2 i {
            color: var(--accent);
            font-size: 1.8rem;
        }

        .about-section p {
            margin-bottom: 1.2rem;
            line-height: 1.7;
            color: var(--dark2);
            font-size: 1rem;
        }

        .about-section ul {
            margin: 1.2rem 0 1.5rem 1.5rem;
        }

        .about-section li {
            margin-bottom: 0.8rem;
            position: relative;
            padding-left: 1.2rem;
            line-height: 1.6;
            font-size: 1rem;
        }

        .about-section li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .feature-card {
            background: var(--light);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
            transition: var(--transition);
            border: 1px solid rgba(74, 111, 165, 0.1);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            background: white;
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .feature-card h3 {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 1rem;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .feature-card h3 i {
            color: var(--accent);
        }

        /* ===== LIBRAIRIE ===== */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            width: 100%;
        }

        .book-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid rgba(74, 111, 165, 0.1);
            position: relative;
        }

        .book-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-hover);
            border-color: var(--secondary);
        }

        .book-image {
            height: 180px;
            overflow: hidden;
            position: relative;
        }

        .book-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .book-card:hover .book-image img {
            transform: scale(1.1);
        }

        .book-content {
            padding: 1.5rem;
        }

        .book-content h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.1rem;
            line-height: 1.4;
        }

        .book-meta {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-bottom: 1.2rem;
        }

        .book-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--dark2);
            font-size: 0.9rem;
        }

        .book-price {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 1.2rem 0;
            color: var(--primary);
        }

        .book-actions {
            margin-top: 1.2rem;
        }

        /* ===== CONTACT PAGE ===== */
        .contact-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2.5rem;
            width: 100%;
        }

        .contact-info h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .contact-item {
            display: flex;
            gap: 1.2rem;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: var(--light);
            border-radius: var(--radius-lg);
            transition: var(--transition);
            border: 1px solid rgba(74, 111, 165, 0.1);
        }

        .contact-item:hover {
            transform: translateX(10px);
            background: white;
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .contact-icon {
            font-size: 1.8rem;
            color: var(--accent);
            min-width: 40px;
        }

        .contact-item h3 {
            margin-bottom: 0.8rem;
            color: var(--dark);
            font-size: 1.1rem;
        }

        .contact-form h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.6rem;
            color: var(--dark);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--light2);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
            background: white;
            color: var(--dark);
            font-family: inherit;
        }

        .form-group input:focus, .form-group textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .alert {
            padding: 1.2rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: fadeIn 0.6s ease-out;
        }

        .alert-success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: var(--transition);
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(74, 111, 165, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(74, 111, 165, 0.4);
            background: linear-gradient(135deg, var(--primary), var(--accent3));
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .btn-whatsapp:hover {
            background: linear-gradient(135deg, #128C7E, #25D366);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .btn-secondary {
            background: var(--secondary);
            box-shadow: 0 4px 15px rgba(107, 142, 35, 0.3);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--secondary), #8BC34A);
            box-shadow: 0 8px 25px rgba(107, 142, 35, 0.4);
        }

        .btn-share {
            background: linear-gradient(135deg, var(--accent4), #9B59B6);
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);
        }

        .btn-share:hover {
            background: linear-gradient(135deg, #9B59B6, var(--accent4));
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.4);
        }

        .btn-share-alt {
            background: linear-gradient(135deg, #3498db, #2980b9);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-share-alt:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }

        /* Bouton connecté pour télécharger */
        .btn-download-logged {
            background: linear-gradient(135deg, var(--success), #2ECC71);
        }

        .btn-download-logged:hover {
            background: linear-gradient(135deg, #2ECC71, var(--success));
        }

        /* Bouton non connecté pour télécharger */
        .btn-download-not-logged {
            background: linear-gradient(135deg, var(--warning), #F39C12);
        }

        .btn-download-not-logged:hover {
            background: linear-gradient(135deg, #F39C12, var(--warning));
        }

        /* ===== MODAL DE PARTAGE ===== */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            overflow-y: auto;
            padding: 20px;
        }

        .share-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .share-modal-content {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: fadeInDown 0.5s ease-out;
            position: relative;
            border: 3px solid var(--primary);
            margin: auto;
            max-height: 90vh;
            overflow-y: auto;
        }

        .share-modal-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            padding-right: 2rem;
        }

        .share-modal-header i {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 1rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .share-modal-header h2 {
            color: var(--dark);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .share-modal-header p {
            color: var(--dark2);
            font-size: 1rem;
            line-height: 1.6;
            max-width: 400px;
            margin: 0 auto;
        }

        .share-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .share-option {
            background: var(--light);
            border-radius: var(--radius);
            padding: 1.5rem 1rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }

        .share-option:hover {
            transform: translateY(-5px);
            background: white;
            box-shadow: var(--shadow-hover);
            border-color: var(--accent);
        }

        .share-option i {
            font-size: 2.5rem;
            margin-bottom: 0.8rem;
            display: inline-block;
        }

        .share-option.whatsapp i {
            color: #25D366;
        }

        .share-option.facebook i {
            color: #1877F2;
        }

        .share-option.telegram i {
            color: #0088cc;
        }

        .share-option.twitter i {
            color: #1DA1F2;
        }

        .share-option.copy i {
            color: var(--primary);
        }

        .share-option span {
            display: block;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .share-url-container {
            margin-bottom: 2rem;
        }

        .share-url-input {
            display: flex;
            gap: 0.5rem;
        }

        .share-url-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--light2);
            border-radius: var(--radius);
            font-size: 0.9rem;
            background: var(--light);
            color: var(--dark);
            font-family: inherit;
            min-width: 0;
        }

        .share-url-input button {
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-family: inherit;
            flex-shrink: 0;
        }

        .share-url-input button:hover {
            background: var(--accent2);
            transform: translateY(-2px);
        }

        .share-modal-footer {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid var(--light2);
        }

        .share-modal-footer p {
            color: var(--dark2);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .close-share-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light);
            border: none;
            color: var(--dark);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .close-share-modal:hover {
            background: var(--error);
            color: white;
            transform: rotate(90deg);
        }

        .close-modal-btn {
            background: var(--light2);
            color: var(--dark);
            border: 2px solid var(--light2);
            padding: 10px 20px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: inherit;
            width: 100%;
            max-width: 200px;
            margin: 0 auto;
            display: block;
        }

        .close-modal-btn:hover {
            background: white;
            border-color: var(--accent);
            color: var(--dark);
            transform: translateY(-2px);
        }

        /* ===== TOAST NOTIFICATION ===== */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            z-index: 10001;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 350px;
        }

        .toast.hidden {
            animation: fadeIn 0.3s ease-out reverse;
            opacity: 0;
            visibility: hidden;
        }

        /* ===== FOOTER ===== */
        footer {
            background: linear-gradient(135deg, var(--dark), #1A2530);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 3rem;
            width: 100%;
            overflow: hidden;
        }

        .footer-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section {
            min-width: 0;
            overflow: hidden;
        }

        .footer-section h3 {
            margin-bottom: 1.5rem;
            color: var(--accent);
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--accent);
        }

        .footer-section a, .footer-section p {
            display: block;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            margin-bottom: 0.8rem;
            transition: var(--transition);
            padding: 6px 0;
            font-size: 0.95rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .footer-section a:hover {
            color: var(--accent);
            transform: translateX(8px);
        }

        .legal-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .legal-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            transition: var(--transition);
            padding: 8px 16px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        .legal-links a:hover {
            color: white;
            background: rgba(212, 160, 23, 0.3);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            width: 100%;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1024px) {
            .page-title h1 {
                font-size: 1.8rem;
            }
            
            .footer-links {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .share-modal-content, .auth-modal-content {
                width: 95%;
                padding: 2rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            /* Menu burger */
            .menu-toggle {
                display: flex;
            }
            
            nav {
                position: fixed;
                top: 0;
                left: -100%;
                width: 80%;
                max-width: 300px;
                height: 100vh;
                background: var(--light);
                padding: 5rem 2rem 2rem;
                transition: var(--transition);
                box-shadow: 10px 0 30px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                overflow-y: auto;
            }
            
            nav.active {
                left: 0;
            }
            
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav a {
                padding: 1rem;
                border-radius: var(--radius);
                font-size: 1.1rem;
                display: block;
                width: 100%;
                text-align: left;
            }
            
            .header-content {
                padding: 0.8rem 0;
            }
            
            .logo {
                font-size: 1.2rem;
            }
            
            .logo i {
                font-size: 1.5rem;
            }
            
            .page-title h1 {
                font-size: 1.6rem;
                padding: 0;
            }
            
            .page-title i {
                font-size: 2.5rem;
            }
            
            .intro-collapsed-header h2 {
                font-size: 1.1rem;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            select {
                min-width: 100%;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .article-detail {
                padding: 1.5rem;
            }
            
            .article-header h1 {
                font-size: 1.6rem;
            }
            
            .article-meta-large {
                flex-direction: column;
                gap: 0.8rem;
                align-items: center;
            }
            
            .contact-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .footer-links {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .legal-links {
                flex-direction: column;
                align-items: center;
                gap: 0.8rem;
                text-align: center;
            }
            
            .copyright {
                font-size: 0.85rem;
                text-align: center;
            }
            
            .files-container {
                padding: 1rem;
            }
            
            /* MODALS RESPONSIVE - CORRECTIONS */
            .share-modal, .auth-modal {
                padding: 10px;
                align-items: flex-start;
                padding-top: 20px;
            }
            
            .share-modal-content, .auth-modal-content {
                padding: 1.5rem;
                margin: 0;
                max-height: 85vh;
                overflow-y: auto;
                width: 100%;
            }
            
            .share-modal-header, .auth-modal-header {
                margin-bottom: 1.5rem;
                padding-right: 2.5rem;
            }
            
            .share-modal-header h2, .auth-modal-header h2 {
                font-size: 1.4rem;
                line-height: 1.3;
            }
            
            .share-modal-header i, .auth-modal-header i {
                font-size: 2.5rem;
            }
            
            .share-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
                margin-bottom: 1.5rem;
            }
            
            .share-option {
                padding: 1rem 0.5rem;
            }
            
            .share-option i {
                font-size: 2rem;
            }
            
            .share-url-input {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .share-url-input input {
                font-size: 0.85rem;
                padding: 10px 12px;
            }
            
            .share-url-input button {
                width: 100%;
                padding: 10px;
            }
            
            .close-share-modal {
                top: 0.5rem;
                right: 0.5rem;
                width: 36px;
                height: 36px;
                background: rgba(255, 255, 255, 0.9);
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            
            .close-modal-btn {
                width: 100%;
                max-width: none;
                margin-top: 0.5rem;
            }
            
            /* Footer centré pour mobile */
            .footer-section {
                text-align: center;
            }
            
            .footer-section h3::after {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .footer-section a:hover {
                transform: translateX(0);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 12px;
            }
            
            .logo {
                font-size: 1.1rem;
            }
            
            .logo i {
                font-size: 1.3rem;
            }
            
            .page-title h1 {
                font-size: 1.4rem;
            }
            
            .page-title i {
                font-size: 2rem;
            }
            
            .intro-collapsed, .intro-expanded,
            .controls, .files-container,
            .about-content, .contact-content,
            .privacy-content, .legal-content {
                padding: 1.2rem;
                border-radius: 16px;
            }
            
            .stat-card {
                padding: 1.2rem;
            }
            
            .stat-card h3 {
                font-size: 1.8rem;
            }
            
            .stat-card i {
                font-size: 2rem;
            }
            
            .files-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .file-card {
                margin-bottom: 0.5rem;
            }
            
            .file-header {
                padding: 1.2rem;
            }
            
            .file-content {
                padding: 1.2rem;
            }
            
            .file-content h3 {
                font-size: 1rem;
            }
            
            .article-card {
                margin-bottom: 1rem;
            }
            
            .article-image {
                padding: 1.5rem;
            }
            
            .article-content {
                padding: 1.2rem;
            }
            
            .article-content h3 {
                font-size: 1.1rem;
            }
            
            .article-meta {
                gap: 0.5rem;
            }
            
            .article-meta span {
                padding: 4px 10px;
                font-size: 0.8rem;
            }
            
            .contact-item {
                padding: 1.2rem;
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .contact-icon {
                font-size: 1.5rem;
                align-self: center;
            }
            
            .form-group input, .form-group textarea {
                padding: 12px 14px;
                font-size: 0.95rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .read-more, .back-to-articles {
                padding: 8px 14px;
                font-size: 0.9rem;
            }
            
            .legal-links a {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
            
            footer {
                padding: 2rem 0 1rem;
            }
            
            .footer-section h3 {
                font-size: 1.1rem;
            }
            
            .footer-section a, .footer-section p {
                font-size: 0.9rem;
            }
            
            /* Modals mobile - encore plus petit */
            .share-modal, .auth-modal {
                padding: 5px;
                padding-top: 10px;
            }
            
            .share-modal-content, .auth-modal-content {
                padding: 1.2rem;
                max-height: 80vh;
            }
            
            .share-modal-header h2, .auth-modal-header h2 {
                font-size: 1.3rem;
                margin-bottom: 0.8rem;
            }
            
            .share-modal-header p, .auth-modal-header p {
                font-size: 0.9rem;
                line-height: 1.5;
            }
            
            .share-options {
                grid-template-columns: 1fr;
                gap: 0.6rem;
            }
            
            .share-option {
                padding: 0.8rem;
            }
            
            .share-url-container p {
                font-size: 0.9rem;
            }
            
            .close-share-modal {
                top: 0.3rem;
                right: 0.3rem;
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .close-modal-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 360px) {
            .page-title h1 {
                font-size: 1.3rem;
            }
            
            .page-title i {
                font-size: 1.8rem;
            }
            
            .intro-collapsed-header h2 {
                font-size: 1rem;
            }
            
            .files-grid {
                grid-template-columns: 1fr;
            }
            
            .file-content h3 {
                font-size: 0.95rem;
            }
            
            .article-content h3 {
                font-size: 1rem;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .footer-links {
                gap: 1rem;
            }
            
            /* Modal encore plus petit pour très petits écrans */
            .share-modal-content, .auth-modal-content {
                padding: 1rem;
            }
            
            .share-modal-header h2, .auth-modal-header h2 {
                font-size: 1.2rem;
            }
        }

        /* ===== OVERLAY POUR MENU BURGER ===== */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ===== SCROLLBAR CUSTOM ===== */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--accent2), var(--accent));
        }
    </style>
</head>
<body>
    <!-- Overlay pour menu burger -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- Modal d'authentification -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <button class="close-share-modal" id="closeAuthModal">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="auth-modal-header">
                <i class="fas fa-user-circle"></i>
                <h2 id="authModalTitle">Connexion requise</h2>
                <p id="authModalDescription">Connectez-vous ou créez un compte pour télécharger ce fichier</p>
            </div>

            <div class="auth-content">
                <!-- Bouton de basculement Connexion/Inscription -->
                <div class="toggle-buttons">
                    <button id="toggle-login" class="toggle-btn active">
                        <i class="fas fa-sign-in-alt"></i> Connexion
                    </button>
                    <button id="toggle-signup" class="toggle-btn">
                        <i class="fas fa-user-plus"></i> Inscription
                    </button>
                </div>

                <!-- Alerts -->
                <div id="auth-alert" class="alert alert-success" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="authAlertMessage">Inscription réussie ! Veuillez vérifier votre email.</span>
                </div>

                <div id="auth-error" class="alert alert-error" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="error-message">Une erreur est survenue.</span>
                </div>

                <!-- Étape 1: Email & Mot de passe -->
                <div class="auth-step active" id="step-1">
                    <div class="auth-step-header">
                        <h2 id="step-title">Se connecter à votre compte</h2>
                        <p id="step-description">Entrez vos informations pour accéder à votre espace</p>
                    </div>

                    <div class="auth-step-indicator">
                        <div class="auth-step-dot active"></div>
                        <div class="auth-step-dot" id="step2-dot"></div>
                        <div class="auth-step-dot" id="step3-dot"></div>
                    </div>

                    <form id="auth-form-step1" class="auth-form">
                        <div class="auth-form-group">
                            <label for="auth-email">Adresse Email</label>
                            <input type="email" id="auth-email" required placeholder="votre@email.com">
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-password">Mot de passe</label>
                            <div class="password-input-container">
                                <input type="password" id="auth-password" required placeholder="Votre mot de passe">
                                <button type="button" class="password-toggle" id="toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="auth-form-actions">
                            <button type="button" id="next-step-btn" class="btn btn-primary">
                                <i class="fas fa-arrow-right"></i> Suivant
                            </button>
                            <button type="button" id="forgot-password" class="btn btn-secondary">
                                <i class="fas fa-key"></i> Mot de passe oublié
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Étape 2: Informations personnelles (inscription uniquement) -->
                <div class="auth-step" id="step-2">
                    <div class="auth-step-header">
                        <h2>Informations personnelles</h2>
                        <p>Complétez votre profil étudiant</p>
                    </div>

                    <div class="auth-step-indicator">
                        <div class="auth-step-dot"></div>
                        <div class="auth-step-dot active"></div>
                        <div class="auth-step-dot" id="step3-dot-2"></div>
                    </div>

                    <form id="auth-form-step2" class="auth-form">
                        <div class="auth-form-group">
                            <label for="auth-nom">Nom</label>
                            <input type="text" id="auth-nom" required placeholder="Votre nom">
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-prenom">Prénom</label>
                            <input type="text" id="auth-prenom" required placeholder="Votre prénom">
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-telephone">Numéro de téléphone</label>
                            <input type="tel" id="auth-telephone" placeholder="Votre numéro (optionnel)">
                        </div>

                        <div class="auth-form-actions">
                            <button type="button" id="prev-step-1" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Retour
                            </button>
                            <button type="button" id="next-step-2" class="btn btn-primary">
                                <i class="fas fa-arrow-right"></i> Suivant
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Étape 3: Informations académiques -->
                <div class="auth-step" id="step-3">
                    <div class="auth-step-header">
                        <h2>Informations académiques</h2>
                        <p>Sélectionnez votre filière et votre niveau</p>
                    </div>

                    <div class="auth-step-indicator">
                        <div class="auth-step-dot"></div>
                        <div class="auth-step-dot"></div>
                        <div class="auth-step-dot active"></div>
                    </div>

                    <form id="auth-form-step3" class="auth-form">
                        <div class="auth-form-group">
                            <label for="auth-filiere">Filière</label>
                            <select id="auth-filiere" required>
                                <option value="">Sélectionnez votre filière</option>
                                <option value="informatique">Informatique</option>
                                <option value="gestion">Gestion</option>
                                <option value="college">Collège</option>
                                <option value="autre">Autre</option>
                            </select>
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-annee">Année d'étude</label>
                            <select id="auth-annee" required>
                                <option value="">Sélectionnez votre année</option>
                                <option value="annee1">Année 1</option>
                                <option value="annee2">Année 2</option>
                                <option value="annee3">Année 3</option>
                                <option value="sixieme">6ème</option>
                                <option value="cinquieme">5ème</option>
                                <option value="quatrieme">4ème</option>
                                <option value="troisieme">3ème</option>
                                <option value="seconde">Seconde</option>
                                <option value="premiere">Première</option>
                                <option value="terminale">Terminale</option>
                            </select>
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-semestre">Semestre actuel</label>
                            <select id="auth-semestre" required>
                                <option value="">Sélectionnez votre semestre</option>
                                <option value="semestre1">Semestre 1</option>
                                <option value="semestre2">Semestre 2</option>
                            </select>
                        </div>

                        <div class="auth-form-group">
                            <label for="auth-objectifs">Objectifs académiques</label>
                            <textarea id="auth-objectifs" placeholder="Vos objectifs pour cette année... (optionnel)"></textarea>
                        </div>

                        <div class="auth-form-actions">
                            <button type="button" id="prev-step-2" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Retour
                            </button>
                            <button type="submit" id="submit-auth" class="btn btn-primary">
                                <i class="fas fa-check"></i> Terminer
                            </button>
                        </div>
                    </form>
                </div>

                <div class="auth-form-footer">
                    <p>En vous inscrivant, vous acceptez nos <a href="#" class="nav-link" data-page="privacy">conditions d'utilisation</a> et notre <a href="#" class="nav-link" data-page="privacy">politique de confidentialité</a>.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de partage -->
    <div class="share-modal" id="shareModal">
        <div class="share-modal-content">
            <button class="close-share-modal" id="closeShareModal">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="share-modal-header">
                <i class="fas fa-share-alt"></i>
                <h2>Partagez PrimeAcademia !</h2>
                <p>Merci d'avoir téléchargé ! Aidez d'autres étudiants à bénéficier de ressources gratuites en partageant cette plateforme.</p>
            </div>
            
            <div class="share-options">
                <div class="share-option whatsapp" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </div>
                
                <div class="share-option facebook" data-platform="facebook">
                    <i class="fab fa-facebook"></i>
                    <span>Facebook</span>
                </div>
                
                <div class="share-option telegram" data-platform="telegram">
                    <i class="fab fa-telegram"></i>
                    <span>Telegram</span>
                </div>
                
                <div class="share-option twitter" data-platform="twitter">
                    <i class="fab fa-twitter"></i>
                    <span>Twitter</span>
                </div>
                
                <div class="share-option copy" data-platform="copy">
                    <i class="fas fa-copy"></i>
                    <span>Copier le lien</span>
                </div>
            </div>
            
            <div class="share-url-container">
                <p style="margin-bottom: 0.8rem; color: var(--dark); font-weight: 600;">Lien à partager :</p>
                <div class="share-url-input">
                    <input type="text" id="shareUrl" readonly value="https://primeacademia.com">
                    <button id="copyUrlBtn">
                        <i class="fas fa-copy"></i> Copier
                    </button>
                </div>
            </div>
            
            <div class="share-modal-footer">
                <p>Merci de contribuer à rendre l'éducation plus accessible !</p>
                <button class="close-modal-btn" id="closeModalBtn">
                    <i class="fas fa-times"></i> Fermer
                </button>
            </div>
        </div>
    </div>

    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo" data-page="home">
                    <i class="fas fa-book-open"></i>
                    <span>PrimeAcademia</span>
                </a>
                
                <!-- Menu burger -->
                <button class="menu-toggle" id="menuToggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <nav id="mainNav">
                    <ul id="nav-menu">
                        <li><a href="#" class="nav-link active" data-page="home">Accueil</a></li>
                        <li><a href="#" class="nav-link" data-page="articles">Articles</a></li>
                        <li><a href="#" class="nav-link" data-page="librairie">Librairie</a></li>
                        <li><a href="#" class="nav-link" data-page="about">À propos</a></li>
                        <li><a href="#" class="nav-link" data-page="contact">Contact</a></li>
                        <li id="auth-nav-item">
                            <a href="#" id="auth-nav-link" class="nav-link">
                                <i class="fas fa-sign-in-alt"></i> Connexion
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Page d'accueil -->
        <div class="page-section active" id="home-page">
            <div class="page-title">
                <i class="fas fa-folder-open"></i>
                <h1>Épreuves Académiques - Votre Ressource Pédagogique</h1>
            </div>

            <!-- Section Introduction - Version Réduite -->
            <div class="intro-collapsed" id="intro-collapsed">
                <div class="intro-collapsed-header">
                    <div>
                        <h2><i class="fas fa-graduation-cap"></i> Bienvenue sur PrimeAcademia</h2>
                        <p>Cliquez pour découvrir notre plateforme et ses ressources pédagogiques</p>
                    </div>
                    <button class="intro-toggle" id="intro-toggle">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>

            <!-- Section Introduction - Version Étendue -->
            <div class="intro-expanded" id="intro-expanded" style="display: none;">
                <h2>
                    <span><i class="fas fa-graduation-cap"></i> Bienvenue sur PrimeAcademia</span>
                    <button class="intro-toggle" id="intro-close">
                        <i class="fas fa-times"></i>
                    </button>
                </h2>
                <p>PrimeAcademia est la plateforme de référence pour l'accès aux ressources pédagogiques et épreuves académiques. Notre mission est de démocratiser l'accès à l'éducation en mettant à disposition des étudiants une collection organisée d'épreuves académiques passées.</p>
                
                <h3>Notre Vision Pédagogique</h3>
                <p>PrimeAcademia a été créé dans le but de briser les barrières à l'accès à l'éducation. Nous comprenons que la préparation aux examens est une étape cruciale dans le parcours académique, et l'accès aux anciennes épreuves représente un avantage significatif pour les étudiants.</p>
                
                <h3>Comment Utiliser Notre Plateforme</h3>
                <p>Notre système de filtres vous permet de naviguer facilement parmi les ressources disponibles :</p>
                <ul>
                    <li><strong>Filières disponibles</strong> : Informatique, Gestion, Collège et bientôt d'autres domaines</li>
                    <li><strong>Années académiques</strong> : Année 1, Année 2, Année 3 pour l'université - 6ème à Terminale pour le collège</li>
                    <li><strong>Semestres</strong> : Semestre 1 et Semestre 2 pour chaque année universitaire</li>
                    <li><strong>Recherche textuelle</strong> : Trouvez rapidement un document spécifique</li>
                    <li><strong>Affichage personnalisable</strong> : Tableau ou cartes selon vos préférences</li>
                </ul>
                
                <h3>Mise à Jour Automatique</h3>
                <p>Notre plateforme se synchronise automatiquement avec Google Drive, garantissant que les nouveaux fichiers ajoutés apparaissent instantanément. Le système vérifie les mises à jour toutes les 24 heures, assurant ainsi que vous ayez toujours accès aux ressources les plus récentes.</p>
                
                <h3>L'Importance des Anciennes Épreuves</h3>
                <p>Les épreuves des années précédentes constituent un outil d'apprentissage inestimable. Elles permettent aux étudiants de :</p>
                <ul>
                    <li>Se familiariser avec le format des questions</li>
                    <li>Identifier les thèmes récurrents et les points importants</li>
                    <li>Pratiquer la gestion du temps pendant l'examen</li>
                    <li>Évaluer leur niveau de préparation</li>
                    <li>Renforcer leur confiance avant les évaluations</li>
                </ul>
                
                <h3>Ce Qui Nous Différencie</h3>
                <p>Contrairement à d'autres plateformes, PrimeAcademia offre :</p>
                <ul>
                    <li>Accès 100% gratuit sans limitations</li>
                    <li>Interface intuitive et responsive</li>
                    <li>Organisation méthodique par filière, année et semestre</li>
                    <li>Mise à jour automatique des contenus</li>
                    <li>Respect total de la vie privée</li>
                    <li>Support technique réactif</li>
                </ul>
                
                <p><strong>⚠️ Note importante :</strong> Pour télécharger les fichiers, vous devez être connecté à votre compte PrimeAcademia.</p>
                
                <p>Nous nous engageons à maintenir cette plateforme comme une ressource fiable et constamment améliorée pour la communauté étudiante.</p>
            </div>

            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Rechercher un fichier...">
                </div>
                <div class="filter-group">
                    <select id="filiere-filter">
                        <option value="">Toutes les filières</option>
                        <option value="informatique">Informatique</option>
                        <option value="gestion">Gestion</option>
                        <option value="college">Collège</option>
                    </select>
                    <select id="year-filter">
                        <option value="">Toutes les années</option>
                        <option value="annee1">Année 1</option>
                        <option value="annee2">Année 2</option>
                        <option value="annee3">Année 3</option>
                        <option value="sixieme">6ème</option>
                        <option value="cinquieme">5ème</option>
                        <option value="quatrieme">4ème</option>
                        <option value="troisieme">3ème</option>
                        <option value="seconde">Seconde</option>
                        <option value="premiere">Première</option>
                        <option value="terminale">Terminale</option>
                    </select>
                    <select id="semestre-filter">
                        <option value="">Tous les semestres</option>
                        <option value="semestre1">Semestre 1</option>
                        <option value="semestre2">Semestre 2</option>
                    </select>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <h3 id="total-files">0</h3>
                    <p>Fichiers disponibles</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-graduation-cap"></i>
                    <h3 id="total-filieres">0</h3>
                    <p>Filières</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-user"></i>
                    <h3 id="total-users">0</h3>
                    <p>Étudiants inscrits</p>
                </div>
            </div>

            <div class="files-container">
                <div id="loading" class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <h2>Chargement des fichiers...</h2>
                    <p>Connexion à Google Drive en cours</p>
                </div>

                <div id="error" class="error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>Erreur de chargement</h2>
                    <p>Impossible de récupérer les fichiers depuis Google Drive.</p>
                    <button id="retry-btn" class="btn btn-primary" style="margin-top: 15px;">
                        <i class="fas fa-redo"></i> Réessayer
                    </button>
                </div>

                <div id="empty-state" class="empty-state" style="display: none;">
                    <i class="fas fa-folder-open"></i>
                    <h2>Aucun fichier disponible</h2>
                    <p>Les fichiers apparaîtront ici une fois ajoutés à Google Drive.</p>
                </div>

                <div id="files-content" style="display: none;">
                    <!-- Grille de fichiers -->
                    <div class="files-grid" id="files-grid">
                        <!-- Les fichiers seront ajoutés ici dynamiquement -->
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination" id="pagination" style="display: none;">
                        <button class="pagination-btn" id="first-page" disabled>
                            <i class="fas fa-angle-double-left"></i>
                        </button>
                        <button class="pagination-btn" id="prev-page" disabled>
                            <i class="fas fa-angle-left"></i>
                        </button>
                        <span class="pagination-info" id="page-info">Page 1 sur 1</span>
                        <button class="pagination-btn" id="next-page" disabled>
                            <i class="fas fa-angle-right"></i>
                        </button>
                        <button class="pagination-btn" id="last-page" disabled>
                            <i class="fas fa-angle-double-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Articles -->
        <div class="page-section" id="articles-page">
            <div class="page-title">
                <i class="fas fa-newspaper"></i>
                <h1>Articles et Conseils Pédagogiques</h1>
            </div>

            <div class="articles-grid">
                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="article-content">
                        <h3>Comment bien se préparer aux examens</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 15 Mars 2025</span>
                            <span><i class="fas fa-clock"></i> 12 min de lecture</span>
                        </div>
                        <p>Découvrez les meilleures stratégies pour optimiser votre temps de révision et maximiser vos chances de réussite aux examens. Un guide complet pour les étudiants.</p>
                        <a href="#" class="read-more" data-article="article1">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>

                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="article-content">
                        <h3>Organiser son espace de travail</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 10 Mars 2025</span>
                            <span><i class="fas fa-clock"></i> 8 min de lecture</span>
                        </div>
                        <p>Un environnement de travail bien organisé peut considérablement améliorer votre concentration et votre productivité. Conseils pratiques pour optimiser votre espace.</p>
                        <a href="#" class="read-more" data-article="article2">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>

                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="article-content">
                        <h3>Techniques de mémorisation efficaces</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 5 Mars 2025</span>
                            <span><i class="fas fa-clock"></i> 15 min de lecture</span>
                        </div>
                        <p>Apprenez des méthodes éprouvées pour mémoriser plus facilement vos cours et retenir l'information sur le long terme. Des techniques validées par les neurosciences.</p>
                        <a href="#" class="read-more" data-article="article3">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>

                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="article-content">
                        <h3>Gestion du temps et productivité</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 28 Février 2025</span>
                            <span><i class="fas fa-clock"></i> 10 min de lecture</span>
                        </div>
                        <p>Maîtriser son temps est essentiel pour réussir ses études. Découvrez comment optimiser votre emploi du temps et booster votre productivité.</p>
                        <a href="#" class="read-more" data-article="article4">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>

                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="article-content">
                        <h3>Alimentation et performance cognitive</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 22 Février 2025</span>
                            <span><i class="fas fa-clock"></i> 9 min de lecture</span>
                        </div>
                        <p>Votre alimentation influence directement vos capacités d'apprentissage. Apprenez quels aliments privilégier pour optimiser vos performances intellectuelles.</p>
                        <a href="#" class="read-more" data-article="article5">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>

                <div class="article-card">
                    <div class="article-image">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="article-content">
                        <h3>L'importance du sommeil dans l'apprentissage</h3>
                        <div class="article-meta">
                            <span><i class="fas fa-calendar"></i> 18 Février 2025</span>
                            <span><i class="fas fa-clock"></i> 7 min de lecture</span>
                        </div>
                        <p>Le sommeil joue un rôle crucial dans la consolidation de la mémoire. Découvrez comment optimiser votre sommeil pour améliorer vos résultats académiques.</p>
                        <a href="#" class="read-more" data-article="article6">
                            Lire la suite <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Librairie -->
        <div class="page-section" id="librairie-page">
            <div class="page-title">
                <i class="fas fa-book"></i>
                <h1>Librairie Étudiante</h1>
            </div>

            <div class="files-container">
                <div id="books-loading" class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <h2>Chargement des livres...</h2>
                    <p>Connexion à Google Drive en cours</p>
                </div>

                <div id="books-error" class="error" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>Erreur de chargement</h2>
                    <p>Impossible de récupérer les livres depuis Google Drive.</p>
                    <button id="books-retry-btn" class="btn btn-primary" style="margin-top: 15px;">
                        <i class="fas fa-redo"></i> Réessayer
                    </button>
                </div>

                <div id="books-empty-state" class="empty-state" style="display: none;">
                    <i class="fas fa-book"></i>
                    <h2>Aucun livre disponible</h2>
                    <p>Les livres apparaîtront ici une fois ajoutés à Google Drive.</p>
                </div>

                <div class="books-grid" id="books-grid">
                    <!-- Les livres seront ajoutés ici dynamiquement -->
                </div>
            </div>
        </div>

        <!-- Page À propos -->
        <div class="page-section" id="about-page">
            <div class="page-title">
                <i class="fas fa-info-circle"></i>
                <h1>À Propos de PrimeAcademia</h1>
            </div>

            <div class="about-content">
                <div class="about-section">
                    <h2><i class="fas fa-rocket"></i> Notre Mission</h2>
                    <p>PrimeAcademia est une plateforme éducative innovante dédiée à la démocratisation de l'accès aux ressources académiques. Notre mission est de fournir aux étudiants des outils pédagogiques de qualité pour faciliter leur réussite académique.</p>
                    <p>Nous croyons fermement que l'éducation devrait être accessible à tous, indépendamment des contraintes financières ou géographiques. C'est pourquoi nous mettons gratuitement à disposition une vaste collection d'épreuves académiques organisées méthodiquement.</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-users"></i> Notre Équipe</h2>
                    <p>PrimeAcademia est porté par une équipe passionnée d'enseignants, de développeurs et d'étudiants qui partagent une vision commune : transformer l'expérience d'apprentissage grâce à la technologie.</p>
                    <p>Notre équipe travaille constamment à améliorer la plateforme et à enrichir son contenu pour répondre aux besoins évolutifs de la communauté étudiante.</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-star"></i> Nos Valeurs</h2>
                    <ul>
                        <li><strong>Accessibilité</strong> : Ressources gratuites pour tous les étudiants</li>
                        <li><strong>Qualité</strong> : Contenu vérifié et organisé méthodiquement</li>
                        <li><strong>Innovation</strong> : Interface moderne et expérience utilisateur optimale</li>
                        <li><strong>Communauté</strong> : Plateforme collaborative au service des étudiants</li>
                        <li><strong>Transparence</strong> : Fonctionnement clair et respect de la vie privée</li>
                    </ul>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-cogs"></i> Fonctionnalités Principales</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3><i class="fas fa-search"></i> Recherche Avancée</h3>
                            <p>Trouvez rapidement les documents dont vous avez besoin grâce à notre système de filtres intelligents.</p>
                        </div>
                        <div class="feature-card">
                            <h3><i class="fas fa-user-shield"></i> Authentification</h3>
                            <p>Créez un compte pour accéder à tous les documents et suivre votre progression.</p>
                        </div>
                        <div class="feature-card">
                            <h3><i class="fas fa-mobile-alt"></i> Design Responsive</h3>
                            <p>Accédez à vos ressources depuis n'importe quel appareil : ordinateur, tablette ou smartphone.</p>
                        </div>
                        <div class="feature-card">
                            <h3><i class="fas fa-shield-alt"></i> Sécurité et Confidentialité</h3>
                            <p>Vos données sont protégées et nous ne collectons aucune information personnelle sensible.</p>
                        </div>
                    </div>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-exclamation-circle"></i> Note Importante</h2>
                    <p>Pour télécharger les épreuves académiques, vous devez créer un compte gratuit sur PrimeAcademia. Cette mesure nous permet de :</p>
                    <ul>
                        <li>Assurer la sécurité des ressources</li>
                        <li>Personnaliser votre expérience selon votre filière et année d'étude</li>
                        <li>Vous tenir informé des nouvelles ressources</li>
                        <li>Créer une communauté étudiante engagée</li>
                    </ul>
                    <p>L'inscription est gratuite, rapide et ne nécessite aucune information bancaire.</p>
                </div>
            </div>
        </div>

        <!-- Page Contact -->
        <div class="page-section" id="contact-page">
            <div class="page-title">
                <i class="fas fa-envelope"></i>
                <h1>Contactez-Nous</h1>
            </div>

            <div class="contact-content">
                <div class="contact-info">
                    <h2><i class="fas fa-info-circle"></i> Informations de Contact</h2>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3>Email</h3>
                            <p>primeacademia071@gmail.com</p>
                            <p>Réponse sous 24 heures</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div>
                            <h3>WhatsApp</h3>
                            <p>+229 41733286</p>
                            <p>Support direct et rapide</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h3>Horaires de Support</h3>
                            <p>Lundi - Vendredi : 8h - 18h</p>
                            <p>Samedi : 9h - 13h</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div>
                            <h3>Types de Support</h3>
                            <p>Questions techniques</p>
                            <p>Suggestions d'amélioration</p>
                            <p>Problèmes de téléchargement</p>
                        </div>
                    </div>
                </div>

                <div class="contact-form">
                    <h2><i class="fas fa-paper-plane"></i> Envoyez-nous un Message</h2>
                    
                    <div id="contact-alert" class="alert alert-success" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span>Votre message a été envoyé avec succès !</span>
                    </div>

                    <div id="contact-error" class="alert alert-error" style="display: none;">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Une erreur est survenue. Veuillez réessayer.</span>
                    </div>

                    <form id="contactForm" action="https://formspree.io/f/manvdydv" method="POST">
                        <div class="form-group">
                            <label for="name">Votre Nom</label>
                            <input type="text" id="name" name="name" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Votre Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>

                        <div class="form-group">
                            <label for="subject">Sujet</label>
                            <input type="text" id="subject" name="subject" required>
                        </div>

                        <div class="form-group">
                            <label for="message">Votre Message</label>
                            <textarea id="message" name="message" required></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Envoyer le Message
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Page Politique de confidentialité -->
        <div class="page-section" id="privacy-page">
            <div class="page-title">
                <i class="fas fa-shield-alt"></i>
                <h1>Politique de Confidentialité</h1>
            </div>

            <div class="privacy-content">
                <div class="about-section">
                    <h2><i class="fas fa-info-circle"></i> Collecte des Informations</h2>
                    <p>PrimeAcademia s'engage à protéger votre vie privée. Nous collectons uniquement les informations nécessaires au bon fonctionnement de la plateforme :</p>
                    <ul>
                        <li>Adresse email (pour l'authentification et le formulaire de contact)</li>
                        <li>Nom et prénom (pour personnaliser votre expérience)</li>
                        <li>Filière et année d'étude (pour vous proposer des ressources pertinentes)</li>
                        <li>Données de navigation anonymisées</li>
                        <li>Préférences d'affichage (thème sombre/clair)</li>
                    </ul>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-cookie"></i> Utilisation des Cookies</h2>
                    <p>Nous utilisons des cookies techniques pour :</p>
                    <ul>
                        <li>Maintenir votre session de connexion</li>
                        <li>Mémoriser vos préférences de thème</li>
                        <li>Améliorer les performances du site</li>
                        <li>Faciliter votre navigation</li>
                    </ul>
                    <p>Aucun cookie de suivi ou publicitaire n'est utilisé sur notre plateforme.</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-lock"></i> Protection des Données</h2>
                    <p>Vos données sont sécurisées et ne sont jamais partagées avec des tiers. Nous utilisons des protocoles de sécurité standards pour protéger vos informations.</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-download"></i> Authentification Requise</h2>
                    <p>L'authentification est requise pour télécharger les ressources afin de :</p>
                    <ul>
                        <li>Protéger les droits d'auteur des ressources</li>
                        <li>Assurer une utilisation responsable des documents</li>
                        <li>Personnaliser l'expérience utilisateur</li>
                        <li>Construire une communauté étudiante engagée</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Page Mentions légales -->
        <div class="page-section" id="legal-page">
            <div class="page-title">
                <i class="fas fa-gavel"></i>
                <h1>Mentions Légales</h1>
            </div>

            <div class="legal-content">
                <div class="about-section">
                    <h2><i class="fas fa-building"></i> Éditeur du Site</h2>
                    <p><strong>PrimeAcademia</strong></p>
                    <p>Plateforme éducative à but non lucratif</p>
                    <p>Email : primeacademia071@gmail.com</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-cloud"></i> Hébergement</h2>
                    <p>Le site PrimeAcademia est hébergé sur :</p>
                    <p><strong>Google Cloud Platform</strong></p>
                    <p>Les fichiers sont stockés sur Google Drive</p>
                    <p>L'authentification est gérée par Supabase</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-balance-scale"></i> Propriété Intellectuelle</h2>
                    <p>Les épreuves académiques partagées sur PrimeAcademia sont mises à disposition à des fins éducatives. Les droits d'auteur restent la propriété de leurs auteurs respectifs.</p>
                    <p>L'accès aux ressources est conditionné à la création d'un compte gratuit pour assurer une utilisation responsable.</p>
                </div>

                <div class="about-section">
                    <h2><i class="fas fa-exclamation-triangle"></i> Limitations de Responsabilité</h2>
                    <p>PrimeAcademia ne peut être tenu responsable :</p>
                    <ul>
                        <li>De l'exactitude du contenu des fichiers partagés</li>
                        <li>Des interruptions temporaires du service</li>
                        <li>De l'utilisation faite des ressources par les utilisateurs</li>
                        <li>Des problèmes techniques liés au téléchargement</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Articles détaillés (tronqués pour la lisibilité, même contenu que précédemment) -->
        <div class="page-section" id="article1-page">
            <a href="#" class="back-to-articles">
                <i class="fas fa-arrow-left"></i> Retour aux articles
            </a>
            
            <div class="article-detail">
                <div class="article-header">
                    <h1>Comment bien se préparer aux examens</h1>
                    <div class="article-meta-large">
                        <span><i class="fas fa-calendar"></i> 15 Mars 2025</span>
                        <span><i class="fas fa-clock"></i> 12 min de lecture</span>
                        <span><i class="fas fa-user"></i> Équipe PrimeAcademia</span>
                    </div>
                </div>

                <div class="article-body">
                    <h2>Introduction</h2>
                    <p>La préparation aux examens est une étape cruciale dans le parcours académique de tout étudiant. Une bonne organisation et des méthodes de travail efficaces peuvent faire toute la différence dans vos résultats. Dans cet article complet, nous allons explorer les stratégies les plus efficaces pour optimiser votre temps de révision et maximiser vos chances de succès.</p>
                    
                    <div class="highlight-box">
                        <h3>💡 Conseil Clé</h3>
                        <p>Commencez vos révisions au moins 3 semaines avant l'examen pour avoir suffisamment de temps pour couvrir l'ensemble du programme.</p>
                    </div>
                    
                    <h2>Planification et Organisation</h2>
                    <p>La première étape d'une préparation réussie est la planification. Voici quelques conseils pour organiser votre temps efficacement :</p>
                    
                    <h3>Créer un calendrier de révision réaliste</h3>
                    <p>Établissez un planning détaillé qui couvre toutes les matières à réviser. Répartissez le temps en fonction de la difficulté de chaque sujet et de votre niveau de maîtrise. Utilisez un code couleur pour différencier les matières et les types d'activités (révision, exercices, tests).</p>
                    
                    <h3>Prioriser les contenus essentiels</h3>
                    <p>Identifiez les chapitres les plus importants et ceux qui vous posent le plus de difficultés. Consacrez plus de temps aux notions essentielles et à vos points faibles. N'oubliez pas de réviser également les sujets que vous maîtrisez bien pour consolider vos connaissances.</p>
                    
                    <h2>Conclusion</h2>
                    <p>Une préparation méthodique et bien organisée est la clé du succès aux examens. En combinant planification rigoureuse, méthodes de travail efficaces et bonne gestion du stress, vous maximisez vos chances de réussite.</p>
                </div>
            </div>
        </div>

        <!-- Autres articles (structure similaire, tronqués) -->
        <div class="page-section" id="article2-page">
            <a href="#" class="back-to-articles">
                <i class="fas fa-arrow-left"></i> Retour aux articles
            </a>
            
            <div class="article-detail">
                <div class="article-header">
                    <h1>Organiser son espace de travail</h1>
                    <div class="article-meta-large">
                        <span><i class="fas fa-calendar"></i> 10 Mars 2025</span>
                        <span><i class="fas fa-clock"></i> 8 min de lecture</span>
                        <span><i class="fas fa-user"></i> Équipe PrimeAcademia</span>
                    </div>
                </div>

                <div class="article-body">
                    <h2>Introduction</h2>
                    <p>Un espace de travail bien organisé est essentiel pour une étude efficace. Il influence directement votre concentration, votre productivité et votre bien-être général.</p>
                    
                    <!-- Contenu tronqué pour la lisibilité -->
                </div>
            </div>
        </div>

        <!-- Articles 3 à 6 similaires -->

    </main>

    <footer>
        <div class="container">
            <div class="footer-links">
                <div class="footer-section">
                    <h3>PrimeAcademia</h3>
                    <p>Plateforme éducative de partage de ressources académiques pour les étudiants. Accès gratuit aux épreuves organisées par filière, année et semestre.</p>
                    <p><strong>⚠️ Authentification requise pour le téléchargement</strong></p>
                </div>
                <div class="footer-section">
                    <h3>Navigation</h3>
                    <a href="#" class="nav-link" data-page="home">Accueil</a>
                    <a href="#" class="nav-link" data-page="articles">Articles</a>
                    <a href="#" class="nav-link" data-page="librairie">Librairie</a>
                    <a href="#" class="nav-link" data-page="about">À propos</a>
                    <a href="#" class="nav-link" data-page="contact">Contact</a>
                </div>
                <div class="footer-section">
                    <h3>Légal</h3>
                    <a href="#" class="nav-link" data-page="privacy">Politique de confidentialité</a>
                    <a href="#" class="nav-link" data-page="legal">Mentions légales</a>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <a href="mailto:primeacademia071@gmail.com">primeacademia071@gmail.com</a>
                    <a href="https://wa.me/22941733286" target="_blank">WhatsApp: +229 41733286</a>
                    <p>Support étudiant dédié</p>
                </div>
            </div>
            
            <div class="legal-links">
                <a href="#" class="nav-link" data-page="privacy">Politique de confidentialité</a>
                <a href="#" class="nav-link" data-page="legal">Mentions légales</a>
                <a href="#" class="nav-link" data-page="contact">Contact</a>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 PrimeAcademia. Tous droits réservés. | Plateforme éducative à but non lucratif | Authentification requise pour le téléchargement</p>
            </div>
        </div>
    </footer>

    <script>
        // =============================================
        // CONFIGURATIONS
        // =============================================

        // Configuration EmailJS
        const EMAILJS_CONFIG = {
            serviceId: 'service_aowa00e',
            templateId: 'iqdbi0c', 
            publicKey: 'nI3VvKfhbDlDyp_cf'
        };

        // Configuration Supabase (REMPLACEZ CES VALEURS PAR LES VÔTRES)
        const SUPABASE_CONFIG = {
            url: 'https://votre-projet.supabase.co', // Remplacer par votre URL Supabase
            anonKey: 'votre-cle-anon-supabase' // Remplacer par votre clé anon
        };

        // Configuration Google Drive pour les fichiers académiques
        const DRIVE_CONFIG = {
            apiKey: 'AIzaSyB7RFQGzSFAHRMhq5EA8XK50inK-nHHquA',
            folders: {
                'informatique': {
                    'annee1': {
                        'semestre1': '1ifAR2Qdp-1pU02hLgXaNzBr7B5rGdWT0',
                        'semestre2': '1875t_ZzLlFYzw9fiwnpzYCWCIqDmBmJE'
                    },
                    'annee2': {
                        'semestre1': '1TNkeABCC7SzWcyJYSazuSU2nJQ0VZhDF',
                        'semestre2': '1VgYoHu-fdzf8N6sLhzVYWTtNwDu6uszq'
                    },
                    'annee3': {
                        'semestre1': '1fX5oIlUtjaqNpNWMcUxz5-CVURooidAy',
                        'semestre2': '1973ak0m5blMGQdDpkyZtKSO2f6wJ77X4'
                    }
                },
                'gestion': {
                    'annee1': {
                        'semestre1': '1xKrvCyZQsYWb1ukRlzwb-Xism1kt1v-Q',
                        'semestre2': '17cjdgOUdmBmCkdvRQyOD0em9DlfUlce0'
                    },
                    'annee2': {
                        'semestre1': '1_2c6_MxGrvrTKeEkc3vuoqMzRbbAhP2u',
                        'semestre2': '107os1ftGtCpphtAcRH63RtbhBwHAokrF'
                    },
                    'annee3': {
                        'semestre1': '13WR7679luMOE8apLbOLiFO7s6Hl9auyn',
                        'semestre2': '1oPyhgaZz-dwTa3Jyg61mSyiwl_6RQeP6'
                    }
                },
                'college': {
                    'sixieme': {
                        'semestre1': '1SIOjvRFmCmOJ7kGzbHxHiFDGcCZRtR2p',
                        'semestre2': '1SqrFgsny3KE2H7CD_zJaOotyvtnGxzzW'
                    },
                    'cinquieme': {
                        'semestre1': 'COLLEZ_ID_5EME_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_5EME_SEM2_ICI'
                    },
                    'quatrieme': {
                        'semestre1': 'COLLEZ_ID_4EME_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_4EME_SEM2_ICI'
                    },
                    'troisieme': {
                        'semestre1': 'COLLEZ_ID_3EME_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_3EME_SEM2_ICI'
                    },
                    'seconde': {
                        'semestre1': 'COLLEZ_ID_SECONDE_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_SECONDE_SEM2_ICI'
                    },
                    'premiere': {
                        'semestre1': 'COLLEZ_ID_PREMIERE_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_PREMIERE_SEM2_ICI'
                    },
                    'terminale': {
                        'semestre1': 'COLLEZ_ID_TERMINALE_SEM1_ICI',
                        'semestre2': 'COLLEZ_ID_TERMINALE_SEM2_ICI'
                    }
                }
            }
        };

        // Configuration pour la librairie
        const LIBRAIRIE_CONFIG = {
            folderId: '15BF1wR1vs90fSN18Abk1Do4_ABvM4CQY',
            apiKey: DRIVE_CONFIG.apiKey
        };

        // Configuration des pages
        const PAGES_CONFIG = {
            'home': 'home-page',
            'articles': 'articles-page',
            'librairie': 'librairie-page',
            'article1': 'article1-page',
            'article2': 'article2-page',
            'article3': 'article3-page',
            'article4': 'article4-page',
            'article5': 'article5-page',
            'article6': 'article6-page',
            'about': 'about-page',
            'contact': 'contact-page',
            'privacy': 'privacy-page',
            'legal': 'legal-page'
        };

        // Configuration du partage
        const SHARE_CONFIG = {
            url: window.location.href,
            title: 'PrimeAcademia - Plateforme d\'Épreuves Académiques',
            description: 'Accédez gratuitement à des épreuves académiques organisées par filière et année. Outils de préparation et conseils pour la réussite étudiante.',
            hashtags: 'PrimeAcademia,Éducation,Gratuit,Épreuves,Étudiants,Réussite'
        };

        // =============================================
        // VARIABLES GLOBALES
        // =============================================

        let filesData = [];
        let booksData = [];
        let totalUsers = 0;
        
        // Variables pour la pagination
        let currentPage = 1;
        const itemsPerPage = 12;
        let filteredFiles = [];

        // Variables pour l'authentification
        let currentStep = 1;
        let isSignup = false;
        let supabaseClient = null;
        let currentUser = null;
        let currentDownloadFileId = null;
        let currentDownloadFileName = null;

        // =============================================
        // ÉLÉMENTS DOM
        // =============================================

        // Éléments principaux
        const loadingElement = document.getElementById('loading');
        const errorElement = document.getElementById('error');
        const emptyStateElement = document.getElementById('empty-state');
        const filesContentElement = document.getElementById('files-content');
        const filesGrid = document.getElementById('files-grid');
        const totalFilesElement = document.getElementById('total-files');
        const totalFilieresElement = document.getElementById('total-filieres');
        const totalUsersElement = document.getElementById('total-users');

        // Filtres et recherche
        const searchInput = document.getElementById('search-input');
        const filiereFilter = document.getElementById('filiere-filter');
        const yearFilter = document.getElementById('year-filter');
        const semestreFilter = document.getElementById('semestre-filter');
        const retryBtn = document.getElementById('retry-btn');

        // Navigation
        const navLinks = document.querySelectorAll('.nav-link');
        const pageSections = document.querySelectorAll('.page-section');
        const menuToggle = document.getElementById('menuToggle');
        const mainNav = document.getElementById('mainNav');
        const menuOverlay = document.getElementById('menuOverlay');
        const authNavLink = document.getElementById('auth-nav-link');
        const authNavItem = document.getElementById('auth-nav-item');

        // Contact
        const contactForm = document.getElementById('contactForm');
        const contactAlert = document.getElementById('contact-alert');
        const contactError = document.getElementById('contact-error');

        // Librairie
        const booksGrid = document.getElementById('books-grid');
        const booksEmptyState = document.getElementById('books-empty-state');
        const booksLoading = document.getElementById('books-loading');
        const booksError = document.getElementById('books-error');
        const booksRetryBtn = document.getElementById('books-retry-btn');

        // Introduction
        const introCollapsed = document.getElementById('intro-collapsed');
        const introExpanded = document.getElementById('intro-expanded');
        const introToggle = document.getElementById('intro-toggle');
        const introClose = document.getElementById('intro-close');

        // Logo pour navigation
        const logo = document.querySelector('.logo');

        // Pagination
        const paginationElement = document.getElementById('pagination');
        const firstPageBtn = document.getElementById('first-page');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const lastPageBtn = document.getElementById('last-page');
        const pageInfo = document.getElementById('page-info');

        // Modal d'authentification
        const authModal = document.getElementById('authModal');
        const closeAuthModal = document.getElementById('closeAuthModal');
        const authModalTitle = document.getElementById('authModalTitle');
        const authModalDescription = document.getElementById('authModalDescription');

        // Modal de partage
        const shareModal = document.getElementById('shareModal');
        const closeShareModal = document.getElementById('closeShareModal');
        const shareUrl = document.getElementById('shareUrl');
        const copyUrlBtn = document.getElementById('copyUrlBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const shareOptions = document.querySelectorAll('.share-option');

        // Authentification
        const toggleLoginBtn = document.getElementById('toggle-login');
        const toggleSignupBtn = document.getElementById('toggle-signup');
        const authAlert = document.getElementById('auth-alert');
        const authError = document.getElementById('auth-error');
        const authAlertMessage = document.getElementById('authAlertMessage');
        const errorMessage = document.getElementById('error-message');
        const stepTitle = document.getElementById('step-title');
        const stepDescription = document.getElementById('step-description');
        const step2Dot = document.getElementById('step2-dot');
        const step3Dot = document.getElementById('step3-dot');
        const step3Dot2 = document.getElementById('step3-dot-2');

        // =============================================
        // INITIALISATION
        // =============================================

        document.addEventListener('DOMContentLoaded', function() {
            console.log("🚀 Initialisation de PrimeAcademia...");
            
            // Initialisation des services
            if (typeof emailjs !== 'undefined') {
                emailjs.init(EMAILJS_CONFIG.publicKey);
            }
            
            // Initialisation de Supabase
            initializeSupabase();
            
            // Vérifier si l'utilisateur est déjà connecté
            checkAuthStatus();
            
            // Configuration de l'interface
            setupEventListeners();
            
            // Chargement des données
            loadFiles();
            loadBooks();
            
            // Initialisation du menu burger
            setupBurgerMenu();
            
            // Initialisation de la pagination
            setupPagination();
            
            // Initialisation du modal de partage
            setupShareModal();
            
            // Initialisation de l'authentification
            setupAuth();
            
            console.log("✅ PrimeAcademia initialisé avec succès");
        });

        // =============================================
        // GESTION DES ÉVÉNEMENTS
        // =============================================

        function setupEventListeners() {
            setupNavigation();
            setupFilters();
            setupIntroduction();
            setupArticles();
            setupContactForm();
        }

        function setupNavigation() {
            // Navigation principale
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    switchPage(page);
                    setActiveNavLink(this);
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            });

            // Logo navigation
            if (logo) {
                logo.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchPage('home');
                    setActiveNavLink(document.querySelector('[data-page="home"]'));
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            }

            // Footer navigation
            document.querySelectorAll('footer .nav-link, .legal-links .nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    switchPage(page);
                    const mainNavLink = document.querySelector(`nav [data-page="${page}"]`);
                    if (mainNavLink) setActiveNavLink(mainNavLink);
                });
            });

            // Lien d'authentification
            if (authNavLink) {
                authNavLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentUser) {
                        // Si connecté, afficher menu utilisateur
                        showUserMenu();
                    } else {
                        // Si non connecté, ouvrir modal d'authentification
                        openAuthModal('Connexion requise', 'Connectez-vous ou créez un compte pour accéder à toutes les fonctionnalités');
                    }
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            }
        }

        function setupFilters() {
            // Recherche et filtres
            searchInput.addEventListener('input', filterFiles);
            filiereFilter.addEventListener('change', filterFiles);
            yearFilter.addEventListener('change', filterFiles);
            semestreFilter.addEventListener('change', filterFiles);

            // Boutons de rechargement
            retryBtn.addEventListener('click', loadFiles);
            booksRetryBtn.addEventListener('click', loadBooks);
        }

        function setupIntroduction() {
            // Section introduction
            if (introCollapsed && introToggle) {
                introCollapsed.addEventListener('click', function() {
                    introCollapsed.style.display = 'none';
                    introExpanded.style.display = 'block';
                });
            }

            if (introClose) {
                introClose.addEventListener('click', function(e) {
                    e.stopPropagation();
                    introExpanded.style.display = 'none';
                    introCollapsed.style.display = 'block';
                });
            }
        }

        function setupArticles() {
            // Articles - lire la suite
            document.querySelectorAll('.read-more').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const article = this.getAttribute('data-article');
                    switchPage(article);
                    setActiveNavLink(document.querySelector('[data-page="articles"]'));
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            });

            // Retour aux articles
            document.querySelectorAll('.back-to-articles').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchPage('articles');
                    setActiveNavLink(document.querySelector('[data-page="articles"]'));
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            });
        }

        function setupContactForm() {
            if (contactForm) {
                contactForm.addEventListener('submit', handleContactForm);
            }
        }

        function setupBurgerMenu() {
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleBurgerMenu);
            }
            
            if (menuOverlay) {
                menuOverlay.addEventListener('click', closeBurgerMenu);
            }
            
            // Fermer le menu en cliquant sur un lien
            document.querySelectorAll('#mainNav a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                });
            });
            
            // Fermer le menu en appuyant sur Echap
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && mainNav.classList.contains('active')) {
                    closeBurgerMenu();
                }
            });
        }

        function setupPagination() {
            // Boutons de pagination
            firstPageBtn.addEventListener('click', () => goToPage(1));
            prevPageBtn.addEventListener('click', () => goToPage(currentPage - 1));
            nextPageBtn.addEventListener('click', () => goToPage(currentPage + 1));
            lastPageBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredFiles.length / itemsPerPage);
                goToPage(totalPages);
            });
        }

        function setupShareModal() {
            // Bouton de fermeture (croix)
            if (closeShareModal) {
                closeShareModal.addEventListener('click', closeShareModalHandler);
            }
            
            // Bouton copier URL
            if (copyUrlBtn) {
                copyUrlBtn.addEventListener('click', copyShareUrl);
            }
            
            // Bouton fermer en bas
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeShareModalHandler);
            }
            
            // Options de partage
            shareOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const platform = this.getAttribute('data-platform');
                    shareOnPlatform(platform);
                });
            });
            
            // Fermer avec la touche Echap
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && shareModal.classList.contains('active')) {
                    closeShareModalHandler();
                }
            });
            
            // Fermer en cliquant en dehors du modal
            shareModal.addEventListener('click', function(e) {
                if (e.target === shareModal) {
                    closeShareModalHandler();
                }
            });
            
            // Mettre à jour l'URL dans le modal
            if (shareUrl) {
                shareUrl.value = SHARE_CONFIG.url;
            }
        }

        function setupAuth() {
            // Fermer le modal d'authentification
            if (closeAuthModal) {
                closeAuthModal.addEventListener('click', closeAuthModalHandler);
            }
            
            // Fermer avec la touche Echap
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && authModal.classList.contains('active')) {
                    closeAuthModalHandler();
                }
            });
            
            // Fermer en cliquant en dehors du modal
            authModal.addEventListener('click', function(e) {
                if (e.target === authModal) {
                    closeAuthModalHandler();
                }
            });

            // Toggle Connexion/Inscription
            toggleLoginBtn.addEventListener('click', () => switchAuthMode('login'));
            toggleSignupBtn.addEventListener('click', () => switchAuthMode('signup'));

            // Toggle mot de passe
            const togglePasswordBtn = document.getElementById('toggle-password');
            if (togglePasswordBtn) {
                togglePasswordBtn.addEventListener('click', togglePasswordVisibility);
            }

            // Navigation entre les étapes
            const nextStepBtn = document.getElementById('next-step-btn');
            const prevStep1Btn = document.getElementById('prev-step-1');
            const nextStep2Btn = document.getElementById('next-step-2');
            const prevStep2Btn = document.getElementById('prev-step-2');
            const submitAuthBtn = document.getElementById('submit-auth');

            if (nextStepBtn) nextStepBtn.addEventListener('click', nextStep);
            if (prevStep1Btn) prevStep1Btn.addEventListener('click', () => prevStep(1));
            if (nextStep2Btn) nextStep2Btn.addEventListener('click', nextStep);
            if (prevStep2Btn) prevStep2Btn.addEventListener('click', () => prevStep(2));
            if (submitAuthBtn) submitAuthBtn.addEventListener('click', handleAuthSubmit);

            // Mot de passe oublié
            const forgotPasswordBtn = document.getElementById('forgot-password');
            if (forgotPasswordBtn) {
                forgotPasswordBtn.addEventListener('click', handleForgotPassword);
            }
        }

        // =============================================
        // FONCTIONNALITÉS PRINCIPALES
        // =============================================

        // NAVIGATION
        function switchPage(page) {
            pageSections.forEach(section => {
                section.classList.remove('active');
            });
            
            const pageId = PAGES_CONFIG[page];
            if (pageId && document.getElementById(pageId)) {
                document.getElementById(pageId).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function setActiveNavLink(activeLink) {
            navLinks.forEach(link => link.classList.remove('active'));
            activeLink.classList.add('active');
        }

        // MENU BURGER
        function toggleBurgerMenu() {
            if (mainNav.classList.contains('active')) {
                closeBurgerMenu();
            } else {
                openBurgerMenu();
            }
        }

        function openBurgerMenu() {
            mainNav.classList.add('active');
            menuOverlay.classList.add('active');
            menuToggle.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeBurgerMenu() {
            mainNav.classList.remove('active');
            menuOverlay.classList.remove('active');
            menuToggle.classList.remove('active');
            document.body.style.overflow = '';
        }

        // =============================================
        // INITIALISATION SUPABASE
        // =============================================

        function initializeSupabase() {
            try {
                if (window.supabase) {
                    supabaseClient = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);
                    console.log("✅ Supabase initialisé");
                    
                    // Charger le nombre d'utilisateurs
                    loadUserCount();
                } else {
                    console.warn("⚠️ Supabase non chargé, l'authentification sera désactivée");
                }
            } catch (error) {
                console.error("❌ Erreur d'initialisation Supabase:", error);
            }
        }

        // =============================================
        // AUTHENTIFICATION
        // =============================================

        function openAuthModal(title = 'Connexion requise', description = 'Connectez-vous ou créez un compte pour télécharger ce fichier') {
            if (authModal) {
                authModalTitle.textContent = title;
                authModalDescription.textContent = description;
                authModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Réinitialiser le formulaire
                switchAuthMode('login');
            }
        }

        function closeAuthModalHandler() {
            if (authModal) {
                authModal.classList.remove('active');
                document.body.style.overflow = '';
                
                // Réinitialiser les variables de téléchargement
                currentDownloadFileId = null;
                currentDownloadFileName = null;
            }
        }

        function switchAuthMode(mode) {
            isSignup = mode === 'signup';
            
            // Mettre à jour les boutons toggle
            toggleLoginBtn.classList.toggle('active', mode === 'login');
            toggleSignupBtn.classList.toggle('active', mode === 'signup');
            
            // Réinitialiser à l'étape 1
            currentStep = 1;
            updateAuthSteps();
            
            // Masquer les alertes
            if (authAlert) authAlert.style.display = 'none';
            if (authError) authError.style.display = 'none';
            
            // Mettre à jour les textes
            if (mode === 'login') {
                stepTitle.textContent = 'Se connecter à votre compte';
                stepDescription.textContent = 'Entrez vos informations pour accéder à votre espace';
                document.getElementById('next-step-btn').innerHTML = '<i class="fas fa-sign-in-alt"></i> Se connecter';
                document.getElementById('forgot-password').style.display = 'flex';
            } else {
                stepTitle.textContent = 'Créer un compte';
                stepDescription.textContent = 'Rejoignez la communauté PrimeAcademia';
                document.getElementById('next-step-btn').innerHTML = '<i class="fas fa-arrow-right"></i> Suivant';
                document.getElementById('forgot-password').style.display = 'none';
            }
        }

        function updateAuthSteps() {
            // Masquer toutes les étapes
            document.querySelectorAll('.auth-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Afficher l'étape courante
            document.getElementById(`step-${currentStep}`).classList.add('active');
            
            // Mettre à jour les indicateurs
            const dots = document.querySelectorAll('.auth-step-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index + 1 === currentStep);
            });
            
            // Ajuster l'affichage en fonction du mode
            if (!isSignup && currentStep > 1) {
                currentStep = 1;
                updateAuthSteps();
            }
        }

        function nextStep() {
            // Validation de l'étape 1
            if (currentStep === 1) {
                const email = document.getElementById('auth-email').value;
                const password = document.getElementById('auth-password').value;
                
                if (!validateEmail(email)) {
                    showAuthError('Veuillez entrer une adresse email valide.');
                    return;
                }
                
                if (password.length < 6) {
                    showAuthError('Le mot de passe doit contenir au moins 6 caractères.');
                    return;
                }
                
                // Si connexion, traiter directement
                if (!isSignup) {
                    handleLogin(email, password);
                    return;
                }
            }
            
            // Validation de l'étape 2 (inscription)
            if (currentStep === 2 && isSignup) {
                const nom = document.getElementById('auth-nom').value;
                const prenom = document.getElementById('auth-prenom').value;
                
                if (!nom || !prenom) {
                    showAuthError('Veuillez remplir tous les champs obligatoires.');
                    return;
                }
            }
            
            // Passer à l'étape suivante
            if (currentStep < 3 && (isSignup || currentStep === 1)) {
                currentStep++;
                updateAuthSteps();
            }
        }

        function prevStep(fromStep) {
            if (currentStep > 1) {
                currentStep--;
                updateAuthSteps();
            }
        }

        async function handleAuthSubmit(e) {
            e.preventDefault();
            
            if (!supabaseClient) {
                showAuthError('Service d\'authentification non disponible.');
                return;
            }
            
            // Collecter toutes les données
            const userData = {
                email: document.getElementById('auth-email').value,
                password: document.getElementById('auth-password').value,
                nom: document.getElementById('auth-nom').value,
                prenom: document.getElementById('auth-prenom').value,
                telephone: document.getElementById('auth-telephone').value || null,
                filiere: document.getElementById('auth-filiere').value,
                annee: document.getElementById('auth-annee').value,
                semestre: document.getElementById('auth-semestre').value,
                objectifs: document.getElementById('auth-objectifs').value || null,
                created_at: new Date().toISOString()
            };
            
            // Validation finale
            if (!userData.filiere || !userData.annee || !userData.semestre) {
                showAuthError('Veuillez sélectionner votre filière, année et semestre.');
                return;
            }
            
            try {
                // Inscription avec Supabase
                const { data, error } = await supabaseClient.auth.signUp({
                    email: userData.email,
                    password: userData.password,
                    options: {
                        data: {
                            nom: userData.nom,
                            prenom: userData.prenom,
                            telephone: userData.telephone,
                            filiere: userData.filiere,
                            annee: userData.annee,
                            semestre: userData.semestre,
                            objectifs: userData.objectifs
                        }
                    }
                });
                
                if (error) throw error;
                
                // Si succès, sauvegarder les infos supplémentaires dans une table users
                if (data.user) {
                    const { error: profileError } = await supabaseClient
                        .from('users')
                        .insert({
                            id: data.user.id,
                            email: userData.email,
                            nom: userData.nom,
                            prenom: userData.prenom,
                            telephone: userData.telephone,
                            filiere: userData.filiere,
                            annee: userData.annee,
                            semestre: userData.semestre,
                            objectifs: userData.objectifs,
                            created_at: userData.created_at
                        });
                    
                    if (profileError) console.warn('Erreur de profil:', profileError);
                }
                
                showAuthSuccess('Inscription réussie ! Vérifiez votre email pour confirmer votre compte.');
                
                // Mettre à jour le compteur d'utilisateurs
                loadUserCount();
                
            } catch (error) {
                console.error('Erreur d\'inscription:', error);
                showAuthError(error.message || 'Une erreur est survenue lors de l\'inscription.');
            }
        }

        async function handleLogin(email, password) {
            if (!supabaseClient) {
                showAuthError('Service d\'authentification non disponible.');
                return;
            }
            
            try {
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) throw error;
                
                // Connexion réussie
                showAuthSuccess('Connexion réussie !');
                updateAuthUI(true);
                closeAuthModalHandler();
                
                // Si un téléchargement était en attente, le lancer
                if (currentDownloadFileId && currentDownloadFileName) {
                    setTimeout(() => {
                        downloadAndShare(currentDownloadFileId, currentDownloadFileName);
                    }, 1000);
                }
                
            } catch (error) {
                console.error('Erreur de connexion:', error);
                showAuthError(error.message || 'Email ou mot de passe incorrect.');
            }
        }

        async function handleForgotPassword() {
            const email = document.getElementById('auth-email').value;
            
            if (!validateEmail(email)) {
                showAuthError('Veuillez entrer une adresse email valide.');
                return;
            }
            
            if (!supabaseClient) {
                showAuthError('Service non disponible.');
                return;
            }
            
            try {
                const { error } = await supabaseClient.auth.resetPasswordForEmail(email, {
                    redirectTo: `${window.location.origin}/reset-password`
                });
                
                if (error) throw error;
                
                showAuthSuccess('Un email de réinitialisation a été envoyé !');
                
            } catch (error) {
                console.error('Erreur mot de passe oublié:', error);
                showAuthError(error.message || 'Une erreur est survenue.');
            }
        }

        function checkAuthStatus() {
            if (!supabaseClient) return;
            
            supabaseClient.auth.getSession().then(({ data: { session } }) => {
                if (session) {
                    currentUser = session.user;
                    updateAuthUI(true);
                }
            });
            
            supabaseClient.auth.onAuthStateChange((event, session) => {
                if (event === 'SIGNED_IN') {
                    currentUser = session.user;
                    updateAuthUI(true);
                    showToast('Connexion réussie !', 'success');
                } else if (event === 'SIGNED_OUT') {
                    currentUser = null;
                    updateAuthUI(false);
                }
            });
        }

        async function handleLogout() {
            if (!supabaseClient) return;
            
            try {
                await supabaseClient.auth.signOut();
                currentUser = null;
                updateAuthUI(false);
                showToast('Déconnexion réussie', 'success');
            } catch (error) {
                console.error('Erreur de déconnexion:', error);
            }
        }

        function updateAuthUI(isLoggedIn) {
            if (!authNavLink) return;
            
            if (isLoggedIn) {
                // Changer le texte en "Mon Compte"
                authNavLink.innerHTML = '<i class="fas fa-user-circle"></i> Mon Compte';
                authNavLink.classList.add('user-logged-in');
                
                // Mettre à jour l'événement click pour afficher le menu utilisateur
                authNavLink.onclick = (e) => {
                    e.preventDefault();
                    showUserMenu();
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                };
            } else {
                // Rétablir le texte original
                authNavLink.innerHTML = '<i class="fas fa-sign-in-alt"></i> Connexion';
                authNavLink.classList.remove('user-logged-in');
                authNavLink.onclick = (e) => {
                    e.preventDefault();
                    openAuthModal('Connexion requise', 'Connectez-vous ou créez un compte pour accéder à toutes les fonctionnalités');
                    
                    // Fermer le menu burger sur mobile
                    if (window.innerWidth <= 768) {
                        closeBurgerMenu();
                    }
                };
            }
        }

        function showUserMenu() {
            // Créer un menu déroulant simple
            const menu = document.createElement('div');
            menu.style.cssText = `
                position: absolute;
                top: 60px;
                right: 20px;
                background: white;
                border-radius: var(--radius);
                box-shadow: var(--shadow-hover);
                z-index: 1000;
                min-width: 200px;
                overflow: hidden;
            `;
            
            menu.innerHTML = `
                <div style="padding: 1rem; border-bottom: 1px solid var(--light2);">
                    <p style="font-weight: 600; color: var(--dark); margin-bottom: 0.5rem;">Mon compte</p>
                    <p style="color: var(--dark2); font-size: 0.9rem;">${currentUser?.email || 'Connecté'}</p>
                </div>
                <button id="view-profile" style="width: 100%; padding: 1rem; text-align: left; border: none; background: white; color: var(--dark); cursor: pointer; transition: var(--transition);">
                    <i class="fas fa-user" style="margin-right: 10px;"></i> Mon profil
                </button>
                <button id="logout-btn" style="width: 100%; padding: 1rem; text-align: left; border: none; background: white; color: var(--error); cursor: pointer; transition: var(--transition);">
                    <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i> Déconnexion
                </button>
            `;
            
            document.body.appendChild(menu);
            
            // Positionner le menu
            const authNavRect = authNavItem.getBoundingClientRect();
            menu.style.top = `${authNavRect.bottom + window.scrollY}px`;
            menu.style.right = `${window.innerWidth - authNavRect.right}px`;
            
            // Fermer le menu en cliquant ailleurs
            setTimeout(() => {
                const closeMenu = (e) => {
                    if (!menu.contains(e.target) && !authNavItem.contains(e.target)) {
                        menu.remove();
                        document.removeEventListener('click', closeMenu);
                    }
                };
                document.addEventListener('click', closeMenu);
            }, 0);
            
            // Gérer les clics
            document.getElementById('view-profile').addEventListener('click', () => {
                menu.remove();
                showUserProfile();
            });
            
            document.getElementById('logout-btn').addEventListener('click', () => {
                menu.remove();
                handleLogout();
            });
        }

        function showUserProfile() {
            if (!currentUser) return;
            
            // Récupérer les infos utilisateur depuis la table users
            supabaseClient
                .from('users')
                .select('*')
                .eq('id', currentUser.id)
                .single()
                .then(({ data: userData, error }) => {
                    if (error) {
                        console.error('Erreur:', error);
                        showToast('Impossible de charger votre profil', 'error');
                        return;
                    }
                    
                    // Créer un modal pour afficher le profil
                    const profileModal = document.createElement('div');
                    profileModal.className = 'auth-modal active';
                    profileModal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.85);
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        z-index: 10000;
                        backdrop-filter: blur(5px);
                        padding: 20px;
                    `;
                    
                    profileModal.innerHTML = `
                        <div class="auth-modal-content">
                            <button class="close-share-modal" id="closeProfileModal" style="position: absolute; top: 1rem; right: 1rem;">
                                <i class="fas fa-times"></i>
                            </button>
                            
                            <div class="auth-modal-header">
                                <i class="fas fa-user-circle"></i>
                                <h2>Mon Profil</h2>
                                <p>Informations de votre compte PrimeAcademia</p>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                    <div style="background: var(--light); padding: 1rem; border-radius: var(--radius);">
                                        <p style="color: var(--dark2); font-size: 0.9rem; margin-bottom: 0.5rem;">Nom complet</p>
                                        <p style="font-weight: 600; color: var(--dark);">${userData.prenom} ${userData.nom}</p>
                                    </div>
                                    <div style="background: var(--light); padding: 1rem; border-radius: var(--radius);">
                                        <p style="color: var(--dark2); font-size: 0.9rem; margin-bottom: 0.5rem;">Email</p>
                                        <p style="font-weight: 600; color: var(--dark);">${userData.email}</p>
                                    </div>
                                    <div style="background: var(--light); padding: 1rem; border-radius: var(--radius);">
                                        <p style="color: var(--dark2); font-size: 0.9rem; margin-bottom: 0.5rem;">Filière</p>
                                        <p style="font-weight: 600; color: var(--dark);">${formatFiliere(userData.filiere)}</p>
                                    </div>
                                    <div style="background: var(--light); padding: 1rem; border-radius: var(--radius);">
                                        <p style="color: var(--dark2); font-size: 0.9rem; margin-bottom: 0.5rem;">Année</p>
                                        <p style="font-weight: 600; color: var(--dark);">${formatYear(userData.annee)}</p>
                                    </div>
                                </div>
                                
                                <div style="text-align: center; margin-top: 2rem;">
                                    <button id="closeProfileBtn" class="btn btn-primary">
                                        <i class="fas fa-times"></i> Fermer
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(profileModal);
                    document.body.style.overflow = 'hidden';
                    
                    // Gérer la fermeture
                    document.getElementById('closeProfileModal').addEventListener('click', () => {
                        profileModal.remove();
                        document.body.style.overflow = '';
                    });
                    
                    document.getElementById('closeProfileBtn').addEventListener('click', () => {
                        profileModal.remove();
                        document.body.style.overflow = '';
                    });
                    
                    // Fermer en cliquant en dehors
                    profileModal.addEventListener('click', (e) => {
                        if (e.target === profileModal) {
                            profileModal.remove();
                            document.body.style.overflow = '';
                        }
                    });
                });
        }

        // =============================================
        // UTILITAIRES AUTH
        // =============================================

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('auth-password');
            const toggleIcon = document.getElementById('toggle-password').querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleIcon.className = 'fas fa-eye';
            }
        }

        function showAuthSuccess(message) {
            if (authAlert) {
                authAlertMessage.textContent = message;
                authAlert.style.display = 'flex';
                authAlert.classList.remove('alert-error');
                authAlert.classList.add('alert-success');
            }
            
            if (authError) authError.style.display = 'none';
        }

        function showAuthError(message) {
            if (authError) {
                errorMessage.textContent = message;
                authError.style.display = 'flex';
            }
            
            if (authAlert) authAlert.style.display = 'none';
        }

        async function loadUserCount() {
            if (!supabaseClient) return;
            
            try {
                const { count, error } = await supabaseClient
                    .from('users')
                    .select('*', { count: 'exact', head: true });
                
                if (!error && count !== null) {
                    totalUsers = count;
                    if (totalUsersElement) {
                        totalUsersElement.textContent = totalUsers.toLocaleString();
                    }
                }
            } catch (error) {
                console.error('Erreur chargement utilisateurs:', error);
            }
        }

        // =============================================
        // GESTION DES FICHIERS ACADÉMIQUES
        // =============================================

        async function loadFiles() {
            try {
                showLoading();
                await fetchDriveFiles();
                filterFiles();
                updateStats();

                if (filesData.length === 0) {
                    showEmptyState();
                } else {
                    showContent();
                }
            } catch (error) {
                console.error('Erreur lors du chargement des fichiers:', error);
                showError();
            }
        }

        async function fetchDriveFiles() {
            filesData = [];
            let totalFiles = 0;

            for (const [filiere, years] of Object.entries(DRIVE_CONFIG.folders)) {
                for (const [year, semestres] of Object.entries(years)) {
                    for (const [semestre, folderId] of Object.entries(semestres)) {
                        if (folderId && !folderId.includes('COLLEZ_ID')) {
                            try {
                                const files = await fetchFolderFiles(folderId, filiere, year, semestre);
                                filesData.push(...files);
                                totalFiles += files.length;
                            } catch (error) {
                                console.warn(`Dossier ${filiere}-${year}-${semestre}:`, error.message);
                            }
                        }
                    }
                }
            }

            console.log(`📁 ${totalFiles} fichiers chargés depuis Google Drive`);
        }

        async function fetchFolderFiles(folderId, filiere, year, semestre) {
            const response = await fetch(
                `https://www.googleapis.com/drive/v3/files?q='${folderId}' in parents and trashed=false&key=${DRIVE_CONFIG.apiKey}&fields=files(id,name,mimeType,webViewLink,createdTime,modifiedTime,webContentLink)`
            );

            if (!response.ok) throw new Error(`HTTP ${response.status}`);

            const data = await response.json();
            
            if (!data.files || data.files.length === 0) return [];

            return data.files.map(file => ({
                id: file.id,
                name: file.name,
                filiere: filiere,
                year: year,
                semestre: semestre,
                type: getFileType(file.mimeType),
                createdTime: file.createdTime,
                webViewLink: file.webViewLink,
                downloadLink: file.webContentLink || `https://drive.google.com/uc?export=download&id=${file.id}`,
                iconLink: getFileIcon(getFileType(file.mimeType)),
                isNew: isFileNew(file.createdTime)
            }));
        }

        // FILTRAGE ET AFFICHAGE
        function filterFiles() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedFiliere = filiereFilter.value;
            const selectedYear = yearFilter.value;
            const selectedSemestre = semestreFilter.value;

            filteredFiles = filesData.filter(file => {
                const matchesSearch = file.name.toLowerCase().includes(searchTerm);
                const matchesFiliere = !selectedFiliere || file.filiere === selectedFiliere;
                const matchesYear = !selectedYear || file.year === selectedYear;
                const matchesSemestre = !selectedSemestre || file.semestre === selectedSemestre;

                return matchesSearch && matchesFiliere && matchesYear && matchesSemestre;
            });

            currentPage = 1;
            displayFiles();
        }

        function displayFiles() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const filesToDisplay = filteredFiles.slice(startIndex, endIndex);
            
            displayFilesAsGrid(filesToDisplay);
            updatePagination();
        }

        function displayFilesAsGrid(files) {
            filesGrid.innerHTML = '';

            if (files.length === 0) {
                filesGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem 1rem;">
                        <i class="fas fa-search" style="font-size: 2.5rem; margin-bottom: 1rem; color: var(--accent3);"></i>
                        <h3 style="color: var(--dark); margin-bottom: 0.5rem;">Aucun fichier trouvé</h3>
                        <p style="color: var(--dark2);">Essayez de modifier vos critères de recherche</p>
                    </div>
                `;
                return;
            }

            files.forEach(file => {
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                if (file.isNew) fileCard.classList.add('new-file');

                const createdDate = new Date(file.createdTime);
                const formattedDate = createdDate.toLocaleDateString('fr-FR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });

                const isLoggedIn = currentUser !== null;
                const btnClass = isLoggedIn ? 'btn-download-logged' : 'btn-download-not-logged';
                const btnText = isLoggedIn ? 'Télécharger' : 'Se connecter pour télécharger';
                const btnIcon = isLoggedIn ? 'fa-download' : 'fa-sign-in-alt';

                fileCard.innerHTML = `
                    <div class="file-header">
                        <i class="${file.iconLink}"></i>
                    </div>
                    <div class="file-content">
                        <h3>${file.name}</h3>
                        <div class="file-meta">
                            <span><i class="fas fa-graduation-cap"></i> ${formatFiliere(file.filiere)}</span>
                            <span><i class="fas fa-calendar-alt"></i> ${formatYear(file.year)}</span>
                            <span><i class="fas fa-book"></i> ${formatSemestre(file.semestre)}</span>
                        </div>
                        <span class="file-type">${file.type}</span>
                        <div class="file-date">
                            <i class="far fa-calendar"></i> Ajouté le ${formattedDate}
                        </div>
                        <div class="file-actions">
                            <button class="btn ${btnClass}" onclick="handleDownloadClick('${file.id}', '${file.name}')">
                                <i class="fas ${btnIcon}"></i> ${btnText}
                            </button>
                        </div>
                    </div>
                `;
                filesGrid.appendChild(fileCard);
            });
        }

        // =============================================
        // TÉLÉCHARGEMENT AVEC AUTHENTIFICATION
        // =============================================

        function handleDownloadClick(fileId, fileName) {
            if (currentUser) {
                // Utilisateur connecté, télécharger directement
                downloadAndShare(fileId, fileName);
            } else {
                // Utilisateur non connecté, ouvrir modal d'authentification
                currentDownloadFileId = fileId;
                currentDownloadFileName = fileName;
                openAuthModal(
                    'Connexion requise',
                    'Connectez-vous ou créez un compte pour télécharger ce fichier'
                );
            }
        }

        async function downloadAndShare(fileId, fileName) {
            try {
                console.log(`📥 Téléchargement en cours: ${fileName}`);
                
                // Afficher l'indicateur de chargement
                showDownloadLoading(fileName);
                
                // Télécharger le fichier
                await handleFileDownload(fileId, fileName);
                
                // Masquer l'indicateur de chargement
                hideDownloadLoading();
                
                // Afficher le modal de partage après un court délai
                setTimeout(() => {
                    openShareModal();
                }, 500);
                
            } catch (error) {
                console.error('❌ Erreur lors du téléchargement:', error);
                hideDownloadLoading();
                // On peut quand même afficher le modal de partage
                setTimeout(() => {
                    openShareModal();
                }, 500);
            }
        }

        async function handleFileDownload(fileId, fileName) {
            try {
                const directDownloadUrl = `https://www.googleapis.com/drive/v3/files/${fileId}?alt=media&key=${DRIVE_CONFIG.apiKey}`;
                
                const response = await fetch(directDownloadUrl, {
                    method: 'GET',
                    headers: {
                        'Accept': '*/*'
                    }
                });
                
                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = fileName;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    window.URL.revokeObjectURL(url);
                    
                    console.log(`✅ Téléchargement direct réussi: ${fileName}`);
                    return true;
                    
                } else {
                    console.log('🔄 Méthode directe échouée, utilisation de Google Drive');
                    fallbackDownload(fileId, fileName);
                    return true;
                }
                
            } catch (error) {
                console.error('❌ Erreur de téléchargement:', error);
                fallbackDownload(fileId, fileName);
                return true;
            }
        }

        function fallbackDownload(fileId, fileName) {
            const driveUrl = `https://drive.google.com/uc?export=download&id=${fileId}`;
            
            const newWindow = window.open(driveUrl, '_blank');
            
            if (!newWindow) {
                const link = document.createElement('a');
                link.href = driveUrl;
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // =============================================
        // MODAL DE PARTAGE
        // =============================================

        function openShareModal() {
            if (shareModal) {
                shareModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeShareModalHandler() {
            if (shareModal) {
                shareModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        function shareOnPlatform(platform) {
            const shareUrl = SHARE_CONFIG.url;
            const shareTitle = SHARE_CONFIG.title;
            const shareDescription = SHARE_CONFIG.description;
            
            let shareLink = '';
            
            switch(platform) {
                case 'whatsapp':
                    shareLink = `https://wa.me/?text=${encodeURIComponent(shareTitle + ' - ' + shareDescription + ' ' + shareUrl)}`;
                    break;
                    
                case 'facebook':
                    shareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}&quote=${encodeURIComponent(shareDescription)}`;
                    break;
                    
                case 'telegram':
                    shareLink = `https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareTitle + ' - ' + shareDescription)}`;
                    break;
                    
                case 'twitter':
                    shareLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareTitle)}&hashtags=${SHARE_CONFIG.hashtags}`;
                    break;
                    
                case 'copy':
                    copyShareUrl();
                    return;
            }
            
            if (shareLink) {
                window.open(shareLink, '_blank', 'width=600,height=400');
            }
        }

        function copyShareUrl() {
            if (shareUrl) {
                shareUrl.select();
                shareUrl.setSelectionRange(0, 99999);
                
                try {
                    navigator.clipboard.writeText(shareUrl.value).then(() => {
                        showCopySuccess();
                    }).catch(() => {
                        fallbackCopy();
                    });
                } catch (error) {
                    fallbackCopy();
                }
            }
        }

        function fallbackCopy() {
            if (shareUrl) {
                document.execCommand('copy');
                showCopySuccess();
            }
        }

        function showCopySuccess() {
            const originalText = copyUrlBtn.innerHTML;
            copyUrlBtn.innerHTML = '<i class="fas fa-check"></i> Copié !';
            copyUrlBtn.style.background = 'var(--success)';
            
            // Afficher une notification
            showToast('Lien copié dans le presse-papiers !', 'success');
            
            setTimeout(() => {
                copyUrlBtn.innerHTML = originalText;
                copyUrlBtn.style.background = '';
            }, 2000);
        }

        function showToast(message, type = 'success') {
            // Supprimer les anciens toasts
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            // Créer le toast
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // Supprimer le toast après 3 secondes
            setTimeout(() => {
                toast.classList.add('hidden');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 300);
            }, 3000);
        }

        // =============================================
        // GESTION DE LA LIBRAIRIE
        // =============================================

        async function loadBooks() {
            try {
                showBooksLoading();
                await fetchBooks();
                displayBooks();

                if (booksData.length === 0) {
                    showBooksEmptyState();
                } else {
                    showBooksContent();
                }
            } catch (error) {
                console.error('Erreur lors du chargement des livres:', error);
                showBooksError();
            }
        }

        async function fetchBooks() {
            booksData = [];

            try {
                const response = await fetch(
                    `https://www.googleapis.com/drive/v3/files?q='${LIBRAIRIE_CONFIG.folderId}' in parents and trashed=false&key=${LIBRAIRIE_CONFIG.apiKey}&fields=files(id,name,mimeType,webViewLink,createdTime,modifiedTime,thumbnailLink)`
                );

                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const data = await response.json();

                if (data.files && data.files.length > 0) {
                    data.files.forEach(file => {
                        const parts = file.name.split(' - ');
                        const imageUrl = `https://drive.google.com/thumbnail?id=${file.id}&sz=w400`;
                        
                        booksData.push({
                            id: file.id,
                            title: parts[0] || file.name,
                            author: parts[1] || 'Auteur inconnu',
                            category: parts[2] || 'Général',
                            price: parts[3] ? parts[3].replace('.jpg', '').replace('.png', '').replace('.jpeg', '') : 'Prix sur demande',
                            imageUrl: imageUrl,
                            createdTime: file.createdTime,
                            isNew: isFileNew(file.createdTime)
                        });
                    });
                }

                console.log(`📚 ${booksData.length} livres chargés`);
            } catch (error) {
                console.error('Erreur lors du chargement des livres:', error);
                throw error;
            }
        }

        function displayBooks() {
            booksGrid.innerHTML = '';

            booksData.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                if (book.isNew) bookCard.classList.add('new-file');

                bookCard.innerHTML = `
                    <div class="book-image">
                        <img src="${book.imageUrl}" alt="${book.title}" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVydHVyZSBub24gZGlzcG9uaWJsZTwvdGV4dD48L3N2Zz4='">
                    </div>
                    <div class="book-content">
                        <h3>${book.title}</h3>
                        <div class="book-meta">
                            <span><i class="fas fa-user"></i> ${book.author}</span>
                            <span><i class="fas fa-tag"></i> ${book.category}</span>
                        </div>
                        <p>Livre en excellent état, idéal pour les étudiants.</p>
                        <div class="book-price">${book.price}</div>
                        <div class="book-actions">
                            <a href="https://wa.me/22941733286?text=Bonjour%20!%20Je%20suis%20intéressé%20par%20le%20livre%20'${encodeURIComponent(book.title)}'." 
                               class="btn btn-whatsapp" target="_blank">
                                <i class="fab fa-whatsapp"></i> Contacter
                            </a>
                        </div>
                    </div>
                `;
                booksGrid.appendChild(bookCard);
            });
        }

        // =============================================
        // FORMULAIRE DE CONTACT
        // =============================================

        function handleContactForm(e) {
            e.preventDefault();
            
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';
            submitBtn.disabled = true;
            
            if (contactAlert) contactAlert.style.display = 'none';
            if (contactError) contactError.style.display = 'none';
            
            const form = e.target;
            const formData = new FormData(form);
            
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    if (contactAlert) contactAlert.style.display = 'block';
                    form.reset();
                } else {
                    throw new Error('Erreur lors de l\'envoi');
                }
            })
            .catch(error => {
                console.error('Erreur:', error);
                if (contactError) contactError.style.display = 'block';
            })
            .finally(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            });
        }

        // =============================================
        // UTILITAIRES
        // =============================================

        function getFileType(mimeType) {
            const typeMap = {
                'application/pdf': 'PDF',
                'application/vnd.google-apps.document': 'DOCX',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'DOCX',
                'application/zip': 'ZIP',
                'application/vnd.google-apps.spreadsheet': 'XLSX'
            };
            return typeMap[mimeType] || 'FICHIER';
        }

        function getFileIcon(fileType) {
            switch (fileType) {
                case 'PDF': return 'fas fa-file-pdf';
                case 'DOCX': return 'fas fa-file-word';
                case 'ZIP': return 'fas fa-file-archive';
                default: return 'fas fa-file';
            }
        }

        function isFileNew(createdTime) {
            if (!createdTime) return false;
            const createdDate = new Date(createdTime);
            const now = new Date();
            const diffTime = Math.abs(now - createdDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays <= 1;
        }

        function formatFiliere(filiere) {
            const filiereNames = {
                'informatique': 'Informatique',
                'gestion': 'Gestion',
                'college': 'Collège',
                'autre': 'Autre'
            };
            return filiereNames[filiere] || filiere;
        }

        function formatYear(year) {
            const yearNames = {
                'annee1': 'Année 1',
                'annee2': 'Année 2',
                'annee3': 'Année 3',
                'sixieme': '6ème',
                'cinquieme': '5ème',
                'quatrieme': '4ème',
                'troisieme': '3ème',
                'seconde': 'Seconde',
                'premiere': 'Première',
                'terminale': 'Terminale'
            };
            return yearNames[year] || year;
        }

        function formatSemestre(semestre) {
            const semestreNames = {
                'semestre1': 'Semestre 1',
                'semestre2': 'Semestre 2'
            };
            return semestreNames[semestre] || semestre;
        }

        function showDownloadLoading(fileName) {
            const loadingOverlay = document.createElement('div');
            loadingOverlay.id = 'download-loading';
            loadingOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                color: white;
                font-size: 1rem;
                flex-direction: column;
                padding: 20px;
            `;
            
            loadingOverlay.innerHTML = `
                <div style="text-align: center; max-width: 300px;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2.5rem; margin-bottom: 1rem; color: var(--accent);"></i>
                    <p>Téléchargement en cours...</p>
                    <p style="word-break: break-word;"><strong>${fileName}</strong></p>
                    <p style="font-size: 0.85rem; margin-top: 1rem; opacity: 0.8;">Veuillez patienter</p>
                </div>
            `;
            
            document.body.appendChild(loadingOverlay);
        }

        function hideDownloadLoading() {
            const loadingOverlay = document.getElementById('download-loading');
            if (loadingOverlay) {
                loadingOverlay.remove();
            }
        }

        // Gestion des états d'affichage
        function showLoading() {
            if (loadingElement) loadingElement.style.display = 'block';
            if (errorElement) errorElement.style.display = 'none';
            if (emptyStateElement) emptyStateElement.style.display = 'none';
            if (filesContentElement) filesContentElement.style.display = 'none';
        }

        function showError() {
            if (loadingElement) loadingElement.style.display = 'none';
            if (errorElement) errorElement.style.display = 'block';
            if (emptyStateElement) emptyStateElement.style.display = 'none';
            if (filesContentElement) filesContentElement.style.display = 'none';
        }

        function showEmptyState() {
            if (loadingElement) loadingElement.style.display = 'none';
            if (errorElement) errorElement.style.display = 'none';
            if (emptyStateElement) emptyStateElement.style.display = 'block';
            if (filesContentElement) filesContentElement.style.display = 'none';
        }

        function showContent() {
            if (loadingElement) loadingElement.style.display = 'none';
            if (errorElement) errorElement.style.display = 'none';
            if (emptyStateElement) emptyStateElement.style.display = 'none';
            if (filesContentElement) filesContentElement.style.display = 'block';
        }

        function showBooksLoading() {
            if (booksLoading) booksLoading.style.display = 'block';
            if (booksError) booksError.style.display = 'none';
            if (booksEmptyState) booksEmptyState.style.display = 'none';
            if (booksGrid) booksGrid.style.display = 'none';
        }

        function showBooksError() {
            if (booksLoading) booksLoading.style.display = 'none';
            if (booksError) booksError.style.display = 'block';
            if (booksEmptyState) booksEmptyState.style.display = 'none';
            if (booksGrid) booksGrid.style.display = 'none';
        }

        function showBooksEmptyState() {
            if (booksLoading) booksLoading.style.display = 'none';
            if (booksError) booksError.style.display = 'none';
            if (booksEmptyState) booksEmptyState.style.display = 'block';
            if (booksGrid) booksGrid.style.display = 'none';
        }

        function showBooksContent() {
            if (booksLoading) booksLoading.style.display = 'none';
            if (booksError) booksError.style.display = 'none';
            if (booksEmptyState) booksEmptyState.style.display = 'none';
            if (booksGrid) booksGrid.style.display = 'grid';
        }

        // STATISTIQUES
        function updateStats() {
            if (totalFilesElement) totalFilesElement.textContent = filesData.length;
            
            const uniqueFilieres = new Set(filesData.map(file => file.filiere));
            if (totalFilieresElement) totalFilieresElement.textContent = uniqueFilieres.size;
            
            if (totalUsersElement) totalUsersElement.textContent = totalUsers.toLocaleString();
        }

        // =============================================
        // EXPORT DES FONCTIONS GLOBALES
        // =============================================

        window.handleDownloadClick = handleDownloadClick;
        window.downloadAndShare = downloadAndShare;

        // =============================================
        // GESTION DU RESPONSIVE
        // =============================================

        window.addEventListener('resize', function() {
            if (window.innerWidth > 768 && mainNav.classList.contains('active')) {
                closeBurgerMenu();
            }
        });

        console.log("✅ JavaScript PrimeAcademia chargé avec succès");
    </script>
</body>
</html>
